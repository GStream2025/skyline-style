# ======================================================
# SKYLINE STORE — ENV.EXAMPLE (PRO / FINAL / NO BREAK)
# ======================================================
# ✅ Se sube a Git como referencia exacta de variables
# ✅ Producción (Render): setear valores reales en Dashboard
# ❌ No pegues secretos reales acá (API keys, tokens, passwords)
#
# Garantías:
# - No rompe si una feature está apagada
# - No crea admins por accidente
# - Es 1:1 con lo que tu app debe leer
# ======================================================


# ------------------------------------------------------
# 1) APP / FLASK
# ------------------------------------------------------
ENV=development
DEBUG=1
LOG_LEVEL=INFO

HOST=127.0.0.1
PORT=5000

# Base URL ABSOLUTA (emails / links externos)
APP_URL=http://127.0.0.1:5000
APP_NAME=Skyline Store
PREFERRED_URL_SCHEME=http

# Zona horaria consistente
TZ=America/Montevideo


# ------------------------------------------------------
# 2) SEGURIDAD / SESIONES
# ------------------------------------------------------
# ✅ Mejora 1: secret requerido en prod (tu app debe validarlo)
SECRET_KEY=CHANGE_ME_SET_REAL_SECRET

# ✅ Mejora 2: sesiones estables (panel admin / checkout)
SESSION_PERMANENT=1
SESSION_PERMANENT_DAYS=30
REMEMBER_COOKIE_DAYS=30

# ✅ Mejora 3: cookies seguras (en prod poné COOKIE_SECURE=1 y FORCE_HTTPS=1)
COOKIE_SECURE=0
SESSION_SAMESITE=Lax
FORCE_HTTPS=0

# Proxy headers (Render / reverse proxy)
TRUST_PROXY_HEADERS=1

# ✅ Mejora 4: header CSRF estándar para fetch/AJAX
CSRF_HEADER=X-CSRF-Token


# ------------------------------------------------------
# 3) AUTH HARDENING / LIMITS
# ------------------------------------------------------
# ✅ Mejora 5: verificación por email configurable (prod: 1, local: 0)
VERIFY_EMAIL_REQUIRED=0
VERIFY_TOKEN_MAX_AGE_SEC=86400
RESEND_VERIFY_COOLDOWN_SEC=60

# Rate limits login / forms
AUTH_RATE_LIMIT_SECONDS=2
AUTH_FORM_NONCE_TTL=1200
AUTH_MAX_LOGIN_ATTEMPTS=8
AUTH_LOCK_MINUTES=15


# ------------------------------------------------------
# 4) DATABASE
# ------------------------------------------------------
DATABASE_URL=sqlite:///skyline_local.db

# ✅ Mejora 6: SQLAlchemy “quiet + stable”
SQLALCHEMY_TRACK_MODIFICATIONS=0
SQLALCHEMY_POOL_PRE_PING=1


# ------------------------------------------------------
# 5) UPLOADS / ARCHIVOS
# ------------------------------------------------------
UPLOADS_DIR=static/uploads
MAX_UPLOAD_MB=20

# ✅ Mejora 7: control de extensiones + nombres
UPLOAD_ALLOWED_EXT=jpg,jpeg,png,webp,gif,pdf
UPLOAD_MAX_FILENAME_LEN=120


# ------------------------------------------------------
# 6) OWNER / ADMIN (CONTROL TOTAL)
# ------------------------------------------------------
# ✅ Mejora 8 (CRÍTICA):
# En .env.example siempre apagado para evitar que se cree owner/admin al clonar.
SEED=0
SKIP_ADMIN_BOOTSTRAP=1

# (En tu .env REAL: SEED=1 y SKIP_ADMIN_BOOTSTRAP=0)
ADMIN_EMAIL=
ADMIN_PASSWORD=
ADMIN_NAME=
ADMIN_ROLE=admin


# ------------------------------------------------------
# 7) FEATURES (NO BREAK)
# ------------------------------------------------------
# ✅ Mejora 9: features NO rompen si faltan keys, solo funcionan si enable=1
ENABLE_PRINTFUL=0
ENABLE_PAYMENTS=0
ENABLE_EMAILS=0


# ------------------------------------------------------
# 8) PRINTFUL
# ------------------------------------------------------
PRINTFUL_API_KEY=
PRINTFUL_STORE_ID=
PRINTFUL_BASE_URL=https://api.printful.com
PRINTFUL_CACHE_TTL=300


# ------------------------------------------------------
# 9) PAGOS — MERCADOPAGO
# ------------------------------------------------------
MP_PUBLIC_KEY=
MP_ACCESS_TOKEN=


# ------------------------------------------------------
# 10) PAGOS — TRANSFERENCIA
# ------------------------------------------------------
BANK_TRANSFER_INSTRUCTIONS=


# ------------------------------------------------------
# 11) EMAIL — SMTP
# ------------------------------------------------------
# Se usa solo si ENABLE_EMAILS=1
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

SMTP_TLS=1
SMTP_USE_SSL=0

SMTP_FROM_EMAIL=
SMTP_FROM_NAME=Skyline Store

SMTP_TIMEOUT=20
SMTP_RETRIES=2
SMTP_RETRY_SLEEP=0.8

# ✅ Mejora 10: branding consistente
EMAIL_SUBJECT_PREFIX=[Skyline]
EMAIL_BRAND_NAME=Skyline Store


# ------------------------------------------------------
# 12) HEALTH / DIAGNOSTICS
# ------------------------------------------------------
HEALTH_DB_CHECK=0
SHOW_TRACEBACKS=1
