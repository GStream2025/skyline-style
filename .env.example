# ======================================================
# SKYLINE STORE — .env.example (ULTRA PRO / FINAL / NO BREAK)  ✅ +20 mejoras
# ======================================================
# ✅ Este archivo SÍ se sube a Git como referencia exacta (1:1) de variables
# ✅ Producción (Render): setear valores reales en Dashboard
# ❌ NO pegues secretos reales acá (tokens, passwords, API keys)
#
# Garantías:
# - No rompe si una feature está apagada
# - No crea admins por accidente (SEED=0 + SKIP_ADMIN_BOOTSTRAP=1)
# - Compatible con tu create_app() y tu routes auto-register
# ======================================================


# ------------------------------------------------------
# 1) APP / FLASK
# ------------------------------------------------------
ENV=development
DEBUG=1
LOG_LEVEL=INFO

HOST=127.0.0.1
PORT=5000

APP_NAME=Skyline Store
APP_URL=http://127.0.0.1:5000
PREFERRED_URL_SCHEME=http

# ✅ Mejora 1: timezone consistente (logs/fechas)
TZ=America/Montevideo

# ✅ Mejora 2: versión de config (para upgrades sin romper)
APP_CONFIG_VERSION=1

# ✅ Mejora 3: tracebacks controlado (solo local)
SHOW_TRACEBACKS=1


# ------------------------------------------------------
# 2) SEGURIDAD / SESIONES (HARDENED)
# ------------------------------------------------------
# ✅ Mejora 4: en producción tu app EXIGE un SECRET_KEY real (>= 32 chars)
SECRET_KEY=CHANGE_ME_SET_REAL_SECRET_32+CHARS

# ✅ Mejora 5: master key para cifrar settings sensibles (prod recomendado)
# (tu app puede exigirlo con REQUIRE_SETTINGS_MASTER_KEY=1)
SETTINGS_MASTER_KEY=CHANGE_ME_MASTER_KEY_32+CHARS

# ✅ Mejora 6: guard para exigir master key (prod: 1 recomendado)
REQUIRE_SETTINGS_MASTER_KEY=1

# Sesiones estables (panel / checkout)
SESSION_PERMANENT=1
SESSION_PERMANENT_DAYS=30
REMEMBER_COOKIE_DAYS=30

# Cookies (prod: COOKIE_SECURE=1, SESSION_SAMESITE=Lax/Strict, FORCE_HTTPS=1)
COOKIE_SECURE=0
SESSION_SAMESITE=Lax
FORCE_HTTPS=0

# ✅ Mejora 7: nombre cookie consistente (si tu app lo lee)
SESSION_COOKIE_NAME=skyline_session

# Proxy headers (Render / reverse proxy)
TRUST_PROXY_HEADERS=1

# CSRF sin Flask-WTF
CSRF_HEADER=X-CSRF-Token

# ✅ Mejora 8: no-cache en admin (si tu app lo respeta)
ADMIN_NO_CACHE=1


# ------------------------------------------------------
# 3) AUTH HARDENING / LIMITS
# ------------------------------------------------------
VERIFY_EMAIL_REQUIRED=0
VERIFY_TOKEN_MAX_AGE_SEC=86400
RESEND_VERIFY_COOLDOWN_SEC=60

AUTH_RATE_LIMIT_SECONDS=2
AUTH_FORM_NONCE_TTL=1200
AUTH_MAX_LOGIN_ATTEMPTS=8
AUTH_LOCK_MINUTES=15

# ✅ Mejora 9: policy mínimo password (si tu auth lo usa)
AUTH_MIN_PASSWORD_LEN=8

# ✅ Mejora 10: bloquear auto-registro admin (si tu app lo usa)
ALLOW_ADMIN_SELF_REGISTER=0


# ------------------------------------------------------
# 4) DATABASE / SQLALCHEMY
# ------------------------------------------------------
# Local suele ser sqlite, prod recomendado Postgres.
DATABASE_URL=sqlite:///skyline_local.db

# ✅ Mejora 11: compat estándar (si tu app lee SQLALCHEMY_DATABASE_URI)
SQLALCHEMY_DATABASE_URI=sqlite:///skyline_local.db

SQLALCHEMY_TRACK_MODIFICATIONS=0
SQLALCHEMY_POOL_PRE_PING=1

# ✅ Mejora 12: tuning de pool (tu create_app lo usa)
DB_POOL_RECYCLE=280

# ✅ Mejora 13: sqlite busy timeout (dev; si lo implementás en engine options)
SQLITE_BUSY_TIMEOUT_MS=5000

# ✅ Mejora 14: create_all solo dev (tu app lo soporta)
AUTO_CREATE_TABLES=0


# ------------------------------------------------------
# 5) UPLOADS / ARCHIVOS
# ------------------------------------------------------
UPLOADS_DIR=static/uploads
MAX_UPLOAD_MB=20

UPLOAD_ALLOWED_EXT=jpg,jpeg,png,webp,gif,pdf
UPLOAD_MAX_FILENAME_LEN=120

# ✅ Mejora 15: límite de archivos por request (si tu uploader lo soporta)
UPLOAD_MAX_FILES=8

# ✅ Mejora 16: tamaños thumbs futuros (si agregás pipeline)
IMAGE_THUMB_SIZES=320,640,960


# ------------------------------------------------------
# 6) OWNER / ADMIN (CONTROL TOTAL)
# ------------------------------------------------------
# ✅ Mejora 17 (CRÍTICA):
# En .env.example SIEMPRE apagado para evitar que se cree owner/admin al clonar.
SEED=0
SKIP_ADMIN_BOOTSTRAP=1

ADMIN_EMAIL=
ADMIN_PASSWORD=
ADMIN_NAME=
ADMIN_ROLE=admin

# ✅ Mejora 18: email “owner” opcional (si tu lógica lo usa)
OWNER_EMAIL=


# ------------------------------------------------------
# 7) FEATURES (NO BREAK)
# ------------------------------------------------------
ENABLE_PRINTFUL=0
ENABLE_PAYMENTS=0
ENABLE_EMAILS=0

# ✅ Mejora 19: modo pagos (live/sandbox) si tu lógica lo contempla
PAYMENTS_MODE=sandbox

# ✅ Mejora 20: defaults de checkout (si lo usás)
CURRENCY_DEFAULT=UYU
COUNTRY_DEFAULT=UY


# ------------------------------------------------------
# 8) PRINTFUL
# ------------------------------------------------------
PRINTFUL_API_KEY=
PRINTFUL_STORE_ID=
PRINTFUL_BASE_URL=https://api.printful.com
PRINTFUL_CACHE_TTL=300


# ------------------------------------------------------
# 9) PAGOS — MERCADOPAGO / OTROS (opcionales)
# ------------------------------------------------------
MP_PUBLIC_KEY=
MP_ACCESS_TOKEN=
MP_WEBHOOK_SECRET=

PAYPAL_CLIENT_ID=
PAYPAL_CLIENT_SECRET=
PAYPAL_WEBHOOK_ID=

WISE_PROFILE_ID=
WISE_API_TOKEN=

PAYMENTS_RETURN_URL=http://127.0.0.1:5000/checkout/return
PAYMENTS_CANCEL_URL=http://127.0.0.1:5000/checkout/cancel


# ------------------------------------------------------
# 10) PAGOS — TRANSFERENCIA
# ------------------------------------------------------
BANK_TRANSFER_INSTRUCTIONS=


# ------------------------------------------------------
# 11) EMAIL — SMTP
# ------------------------------------------------------
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

SMTP_TLS=1
SMTP_USE_SSL=0

SMTP_FROM_EMAIL=
SMTP_FROM_NAME=Skyline Store
SMTP_REPLY_TO=

SMTP_TIMEOUT=20
SMTP_RETRIES=2
SMTP_RETRY_SLEEP=0.8

EMAIL_SUBJECT_PREFIX=[Skyline]
EMAIL_BRAND_NAME=Skyline Store


# ------------------------------------------------------
# 12) HEALTH / DIAGNOSTICS
# ------------------------------------------------------
HEALTH_DB_CHECK=0
HEALTH_MODE=basic


# ------------------------------------------------------
# 13) ROUTES AUTO REGISTER (tu app/routes/__init__.py)
# ------------------------------------------------------
ROUTES_DEBUG=0
ROUTES_STRICT=0
ROUTES_STRICT_FORCE=0
ROUTES_SCAN_SUBPACKAGES=0
ROUTES_IMPORT_NO_CACHE=0
ROUTES_SCAN_ONLY=0

# Si querés garantizar que lo esencial exista:
# ROUTES_REQUIRE=main,shop,auth,cart,checkout,admin
ROUTES_REQUIRE=

# Deshabilitar por wildcard: "admin*,printful"
ROUTES_DISABLE=

# Ejemplo prefix override:
# ROUTES_PREFIX_ADMIN=/panel
# ROUTES_PREFIX_SHOP=/tienda
