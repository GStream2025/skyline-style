# ======================================================
# SKYLINE STORE — .env.example (ULTRA PRO / FINAL / NO BREAK) v2  ✅ +5 mejoras extra
# ======================================================
# ✅ Este archivo SÍ se sube a Git como referencia exacta (1:1) de variables
# ✅ Producción (Render): setear valores reales en Dashboard
# ❌ NO pegues secretos reales acá (tokens, passwords, API keys)
#
# Garantías:
# - No rompe si una feature está apagada
# - No crea admins por accidente (SEED=0 + SKIP_ADMIN_BOOTSTRAP=1)
# - Compatible con create_app() + auto-register de routes
# ======================================================


# ------------------------------------------------------
# 1) APP / FLASK
# ------------------------------------------------------
# ✅ Corrección: example por defecto "production" para evitar correr inseguro al clonar
ENV=production
DEBUG=0
LOG_LEVEL=INFO

HOST=0.0.0.0
PORT=10000

APP_NAME=Skyline Store
APP_URL=https://your-domain.example
PREFERRED_URL_SCHEME=https

TZ=America/Montevideo
APP_CONFIG_VERSION=2
SHOW_TRACEBACKS=0

# ✅ Mejora EXTRA 1: encoding consistente (Windows-friendly)
PYTHONIOENCODING=utf-8
PYTHONUTF8=1


# ------------------------------------------------------
# 2) SEGURIDAD / SESIONES (HARDENED)
# ------------------------------------------------------
# ✅ Producción: tu app EXIGE un SECRET_KEY real (>= 32 chars)
SECRET_KEY=CHANGE_ME_SET_REAL_SECRET_32+CHARS

# Master key para cifrar settings sensibles (prod recomendado)
SETTINGS_MASTER_KEY=CHANGE_ME_MASTER_KEY_32+CHARS
REQUIRE_SETTINGS_MASTER_KEY=1

# Sesiones estables
SESSION_PERMANENT=1
SESSION_PERMANENT_DAYS=30
REMEMBER_COOKIE_DAYS=30

# Cookies (prod recomendado)
COOKIE_SECURE=1
FORCE_HTTPS=1
SESSION_SAMESITE=Lax

# ✅ Mejora EXTRA 2: flags cookie compatibles (si tu app/Flask los lee)
SESSION_COOKIE_NAME=skyline_session
SESSION_COOKIE_HTTPONLY=1
SESSION_COOKIE_SECURE=1

# Proxy headers (Render / reverse proxy)
TRUST_PROXY_HEADERS=1

# CSRF header (si usás fetch)
CSRF_HEADER=X-CSRF-Token

# ✅ Mejora EXTRA 3: compat con Flask-WTF si está presente
WTF_CSRF_TIME_LIMIT=3600

# Admin no-cache (si tu app lo respeta)
ADMIN_NO_CACHE=1


# ------------------------------------------------------
# 3) AUTH HARDENING / LIMITS
# ------------------------------------------------------
VERIFY_EMAIL_REQUIRED=0
VERIFY_TOKEN_MAX_AGE_SEC=86400
RESEND_VERIFY_COOLDOWN_SEC=60

AUTH_RATE_LIMIT_SECONDS=2
AUTH_FORM_NONCE_TTL=1200
AUTH_MAX_LOGIN_ATTEMPTS=8
AUTH_LOCK_MINUTES=15

AUTH_MIN_PASSWORD_LEN=8
ALLOW_ADMIN_SELF_REGISTER=0


# ------------------------------------------------------
# 4) DATABASE / SQLALCHEMY
# ------------------------------------------------------
# Prod recomendado Postgres (Render)
DATABASE_URL=

# Compat estándar (si tu app lee SQLALCHEMY_DATABASE_URI)
SQLALCHEMY_DATABASE_URI=

SQLALCHEMY_TRACK_MODIFICATIONS=0
SQLALCHEMY_POOL_PRE_PING=1
DB_POOL_RECYCLE=280

# Solo aplica si usás sqlite en dev
SQLITE_BUSY_TIMEOUT_MS=5000

# create_all solo dev
AUTO_CREATE_TABLES=0


# ------------------------------------------------------
# 5) UPLOADS / ARCHIVOS
# ------------------------------------------------------
UPLOADS_DIR=static/uploads
MAX_UPLOAD_MB=20

UPLOAD_ALLOWED_EXT=jpg,jpeg,png,webp,gif,pdf
UPLOAD_MAX_FILENAME_LEN=120
UPLOAD_MAX_FILES=8
IMAGE_THUMB_SIZES=320,640,960


# ------------------------------------------------------
# 6) OWNER / ADMIN (CONTROL TOTAL)
# ------------------------------------------------------
# CRÍTICO: siempre apagado en example
SEED=0
SKIP_ADMIN_BOOTSTRAP=1

ADMIN_EMAIL=
ADMIN_PASSWORD=
ADMIN_NAME=
ADMIN_ROLE=admin
OWNER_EMAIL=


# ------------------------------------------------------
# 7) FEATURES (NO BREAK)
# ------------------------------------------------------
ENABLE_PRINTFUL=0
ENABLE_PAYMENTS=0
ENABLE_EMAILS=0

PAYMENTS_MODE=sandbox
CURRENCY_DEFAULT=UYU
COUNTRY_DEFAULT=UY

# ✅ Mejora EXTRA 4: cache home controlado por env (si tu main_routes lo lee)
ENABLE_HOME_CACHE=1
HOME_CACHE_TTL=120


# ------------------------------------------------------
# 8) PRINTFUL
# ------------------------------------------------------
PRINTFUL_API_KEY=
PRINTFUL_STORE_ID=
PRINTFUL_BASE_URL=https://api.printful.com
PRINTFUL_CACHE_TTL=300


# ------------------------------------------------------
# 9) PAGOS — MERCADOPAGO / OTROS
# ------------------------------------------------------
MP_PUBLIC_KEY=
MP_ACCESS_TOKEN=
MP_WEBHOOK_SECRET=

PAYPAL_CLIENT_ID=
PAYPAL_CLIENT_SECRET=
PAYPAL_WEBHOOK_ID=

WISE_PROFILE_ID=
WISE_API_TOKEN=

PAYMENTS_RETURN_URL=https://your-domain.example/checkout/return
PAYMENTS_CANCEL_URL=https://your-domain.example/checkout/cancel


# ------------------------------------------------------
# 10) TRANSFERENCIA
# ------------------------------------------------------
BANK_TRANSFER_INSTRUCTIONS=


# ------------------------------------------------------
# 11) EMAIL — SMTP
# ------------------------------------------------------
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

SMTP_TLS=1
SMTP_USE_SSL=0

SMTP_FROM_EMAIL=
SMTP_FROM_NAME=Skyline Store
SMTP_REPLY_TO=

SMTP_TIMEOUT=20
SMTP_RETRIES=2
SMTP_RETRY_SLEEP=1

EMAIL_SUBJECT_PREFIX=[Skyline]
EMAIL_BRAND_NAME=Skyline Store


# ------------------------------------------------------
# 12) HEALTH / DIAGNOSTICS
# ------------------------------------------------------
HEALTH_DB_CHECK=0
HEALTH_MODE=basic


# ------------------------------------------------------
# 13) ROUTES AUTO REGISTER
# ------------------------------------------------------
ROUTES_DEBUG=0
ROUTES_STRICT=0
ROUTES_STRICT_FORCE=0
ROUTES_SCAN_SUBPACKAGES=0
ROUTES_IMPORT_NO_CACHE=0
ROUTES_SCAN_ONLY=0

ROUTES_REQUIRE=
ROUTES_DISABLE=

# ROUTES_PREFIX_ADMIN=/panel
# ROUTES_PREFIX_SHOP=/tienda

# ✅ Mejora EXTRA 5: bandera para mostrar un resumen de config en logs (si tu app la usa)
CONFIG_DIAGNOSTICS=1
