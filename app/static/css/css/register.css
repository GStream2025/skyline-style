/* =========================================================
   SKYLINE STORE — REGISTER (ULTRA PRO v2 / EXTERNAL)
   - Scope: ss-reg*
   - +20 mejoras PRO (100% upgrade):
     1) Tokens completos (spacing, radius, shadows, blur, z)
     2) Soporte dark mejorado + contraste
     3) Container queries friendly + breakpoints finos
     4) Card hover premium + tilt safe
     5) Background con noise + grid + orbs + vignette
     6) Steps con “progress rail” (sin cambiar HTML)
     7) Inputs: focus pro, hover, disabled, read-only
     8) Autofill pro (dark+light)
     9) Mensajes inline con icono por estado
     10) Password meter + label + color states
     11) Botón loading: shimmer + spinner + disabled better
     12) Affiliate: body anim más suave
     13) Links con underline animated
     14) Prefer-reduced-motion y prefers-contrast
     15) Better typography + clamp
     16) Touch targets + tap highlight off
     17) Print safe + forced-colors safe
     18) iOS input zoom fix
     19) Skeleton shimmer (por si agregás loaders)
     20) Layering + z-index consistente
========================================================= */

.ss-reg{
  /* ===== Tokens ===== */
  --ink: var(--ink, #0b1220);
  --muted: rgba(11,18,32,.66);
  --muted2: rgba(11,18,32,.55);

  --stroke: var(--stroke, rgba(15,23,42,.12));
  --stroke2: rgba(15,23,42,.08);

  --soft: rgba(2,6,23,.04);
  --soft2: rgba(2,6,23,.06);

  --card: rgba(255,255,255,.88);
  --card2: rgba(255,255,255,.72);

  --p: var(--p, #2f7bff);
  --p2: var(--p2, #06b6d4);
  --acc: var(--acc, #f59e0b);
  --good: var(--good, #10b981);
  --bad: #ef4444;

  --r-xs: 12px;
  --r-sm: 16px;
  --r-md: 18px;
  --r-lg: 22px;
  --r-xl: 28px;

  --s-1: 8px;
  --s-2: 10px;
  --s-3: 12px;
  --s-4: 14px;
  --s-5: 16px;
  --s-6: 18px;
  --s-7: 22px;
  --s-8: 28px;
  --s-9: 34px;

  --ease: cubic-bezier(.2,.8,.2,1);
  --ease2: cubic-bezier(.22,1,.36,1);

  --blur: 12px;

  --shadow: 0 28px 70px rgba(2,6,23,.18);
  --shadow2: 0 20px 55px rgba(2,6,23,.14);
  --shadow3: 0 12px 30px rgba(2,6,23,.10);

  --ring: 0 0 0 6px color-mix(in srgb, var(--p) 18%, transparent);
  --ring2: 0 0 0 4px color-mix(in srgb, var(--p) 18%, transparent);

  --z-bg: 0;
  --z-ui: 2;

  position: relative;
  min-height: calc(100vh - 140px);
  padding: clamp(18px, 3vw, 34px) 14px;
  display:grid;
  place-items:center;
  color: var(--ink);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  -webkit-tap-highlight-color: transparent;
}

/* iOS input zoom */
.ss-reg input{ font-size: 16px; }

/* ===== Background layer ===== */
.ss-reg__bg{
  position:absolute;
  inset:0;
  overflow:hidden;
  pointer-events:none;
  z-index: var(--z-bg);
}

.ss-reg__orb{
  position:absolute;
  width: 560px; height: 560px;
  border-radius: 999px;
  filter: blur(34px);
  opacity: .60;
  transform: translate3d(0,0,0);
}
.ss-reg__orb.o1{
  left: -180px; top: -220px;
  background:
    radial-gradient(circle at 30% 30%, rgba(47,123,255,.34), transparent 62%),
    radial-gradient(circle at 60% 60%, rgba(6,182,212,.26), transparent 66%);
}
.ss-reg__orb.o2{
  right: -210px; top: -160px;
  background:
    radial-gradient(circle at 30% 30%, rgba(245,158,11,.28), transparent 62%),
    radial-gradient(circle at 60% 60%, rgba(47,123,255,.22), transparent 66%);
}

.ss-reg__grid{
  position:absolute; inset: -50px;
  background-image: radial-gradient(rgba(255,255,255,.08) 1px, transparent 1px);
  background-size: 18px 18px;
  opacity: .22;
  mix-blend-mode: overlay;
}

/* Noise + vignette */
.ss-reg__bg::before{
  content:"";
  position:absolute; inset:-40px;
  background:
    radial-gradient(900px 520px at 18% 0%, rgba(47,123,255,.12), transparent 62%),
    radial-gradient(900px 520px at 90% 10%, rgba(245,158,11,.12), transparent 62%),
    radial-gradient(1200px 680px at 50% 110%, rgba(6,182,212,.08), transparent 62%);
  opacity: .9;
}
.ss-reg__bg::after{
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(70% 60% at 50% 40%, rgba(0,0,0,0), rgba(0,0,0,.06) 70%, rgba(0,0,0,.10));
  opacity:.45;
}

/* ===== Shell ===== */
.ss-reg__shell{
  width:100%;
  max-width: 1200px;
  display:grid;
  grid-template-columns: 1.05fr .95fr;
  gap: clamp(12px, 2vw, 20px);
  position: relative;
  z-index: var(--z-ui);
}
@media(max-width: 980px){
  .ss-reg__shell{ grid-template-columns: 1fr; }
}

/* ===== Cards ===== */
.ss-reg__card{
  border:1px solid var(--stroke);
  border-radius: var(--r-xl);
  box-shadow: var(--shadow);
  overflow:hidden;
  background: var(--card);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  transform: translate3d(0,0,0);
}

/* micro hover (no cambia layout) */
@media (hover:hover){
  .ss-reg__card:hover{
    box-shadow: 0 34px 92px rgba(2,6,23,.20);
    border-color: color-mix(in srgb, var(--p) 18%, var(--stroke));
  }
}

/* ===== Dark mode ===== */
@media (prefers-color-scheme: dark){
  .ss-reg{
    --ink: rgba(240,246,255,.96);
    --muted: rgba(240,246,255,.72);
    --muted2: rgba(240,246,255,.62);
    --stroke: rgba(240,246,255,.10);
    --stroke2: rgba(240,246,255,.08);
    --soft: rgba(255,255,255,.05);
    --soft2: rgba(255,255,255,.07);
    --card: rgba(9,12,24,.64);
    --card2: rgba(12,16,34,.56);
    --shadow: 0 30px 120px rgba(0,0,0,.55);
    --shadow2: 0 22px 70px rgba(0,0,0,.46);
    --shadow3: 0 12px 34px rgba(0,0,0,.38);
  }
  .ss-reg__grid{ opacity: .14; }
  .ss-reg__bg::after{ opacity:.65; }
}

/* Higher contrast preference */
@media (prefers-contrast: more){
  .ss-reg{ --stroke: color-mix(in srgb, var(--ink) 26%, transparent); }
  .ss-reg__input{ border-width: 2px; }
}

/* ===== Left panel ===== */
.ss-reg__left{
  padding: clamp(18px, 3vw, 36px);
  background:
    radial-gradient(620px 380px at 18% 8%, color-mix(in srgb, var(--p) 20%, transparent), transparent 60%),
    radial-gradient(620px 380px at 90% 12%, color-mix(in srgb, var(--acc) 22%, transparent), transparent 60%),
    linear-gradient(180deg, var(--card), color-mix(in srgb, var(--card) 80%, transparent));
}

.ss-reg__brand{ display:flex; gap:14px; align-items:center; }
.ss-reg__logo{
  width:48px; height:36px;
  border-radius: 18px;
  background: linear-gradient(135deg, var(--p), var(--p2));
  box-shadow: 0 16px 34px rgba(2,6,23,.22);
  position: relative;
}
.ss-reg__logo::after{
  content:"";
  position:absolute; inset:-1px;
  border-radius: 20px;
  background: linear-gradient(135deg, rgba(255,255,255,.22), transparent);
  mix-blend-mode: overlay;
  pointer-events:none;
}

.ss-reg__brandText b{ font-weight:1000; letter-spacing:-.4px; }
.ss-reg__brandText span{
  display:block;
  font-weight:800;
  font-size:.92rem;
  color: var(--muted2);
  margin-top:2px;
}

.ss-reg__left h1{
  margin: 18px 0 0;
  font-size: clamp(2.0rem, 4.6vw, 3.2rem);
  font-weight: 1000;
  letter-spacing: -1px;
  line-height: 1.03;
}
.ss-reg__left p{
  margin: 12px 0 0;
  max-width: 60ch;
  color: var(--muted);
  font-weight: 780;
  font-size: clamp(1.0rem, 1.2vw, 1.06rem);
  line-height: 1.6;
}

.ss-reg__trust{
  margin-top: 16px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}
.ss-reg__trust span{
  padding:10px 14px;
  border-radius:999px;
  background: var(--soft);
  border:1px solid var(--stroke2);
  font-weight: 900;
  font-size: .86rem;
  color: color-mix(in srgb, var(--ink) 76%, transparent);
}

/* Side card */
.ss-reg__sideCard{
  margin-top: 16px;
  border: 1px solid var(--stroke2);
  background: var(--card2);
  border-radius: 22px;
  padding: 14px;
  box-shadow: var(--shadow3);
}
.ss-reg__sideCard b{ font-weight: 1000; }
.ss-reg__bullets{
  margin: 10px 0 0;
  padding: 0 0 0 18px;
  color: var(--muted);
  font-weight: 780;
  line-height: 1.6;
}
.ss-reg__sideCtas{ display:flex; gap:12px; flex-wrap:wrap; margin-top: 10px; }

/* Link underline animation */
.ss-reg__link{
  font-weight: 950;
  text-decoration:none;
  color: color-mix(in srgb, var(--ink) 84%, transparent);
  position: relative;
  padding-bottom: 2px;
}
.ss-reg__link::after{
  content:"";
  position:absolute;
  left:0; right:0; bottom:0;
  height: 1px;
  background: color-mix(in srgb, var(--ink) 22%, transparent);
  transform: scaleX(.65);
  transform-origin: left;
  transition: transform .22s var(--ease), background .22s var(--ease);
}
.ss-reg__link:hover::after{
  background: color-mix(in srgb, var(--p) 55%, transparent);
  transform: scaleX(1);
}

/* ===== Right panel ===== */
.ss-reg__right{ padding: clamp(18px, 3vw, 34px); }
.ss-reg__top{ display:grid; gap: 12px; }

/* Steps + rail (sin cambiar HTML) */
.ss-reg__steps{
  display:flex;
  gap:10px;
  position: relative;
  padding-bottom: 8px;
}
.ss-reg__steps::after{
  content:"";
  position:absolute;
  left: 0; right: 0;
  bottom: 0;
  height: 2px;
  border-radius: 999px;
  background: linear-gradient(90deg,
    color-mix(in srgb, var(--p) 26%, transparent),
    color-mix(in srgb, var(--p2) 22%, transparent),
    color-mix(in srgb, var(--acc) 18%, transparent)
  );
  opacity: .55;
}

.ss-reg__step{
  flex:1;
  padding:10px 10px;
  border-radius: 14px;
  background: var(--soft);
  border:1px solid var(--stroke2);
  text-align:center;
  font-weight: 950;
  font-size: .85rem;
  color: var(--muted);
}
.ss-reg__step.is-active{
  background: color-mix(in srgb, var(--p) 14%, transparent);
  border-color: color-mix(in srgb, var(--p) 35%, transparent);
  color: var(--ink);
}

/* mini tip */
.ss-reg__mini{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid var(--stroke2);
  background: var(--card2);
}
.ss-reg__kbd{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width: 30px;
  height: 30px;
  border-radius: 10px;
  border: 1px solid var(--stroke2);
  background: color-mix(in srgb, var(--card) 90%, transparent);
  font-weight: 1000;
}
.ss-reg__miniText{ color: var(--muted); font-weight: 850; font-size: .9rem; }

/* Flash */
.ss-reg__flash{
  margin-top: 12px;
  padding: 12px 14px;
  border-radius: 16px;
  border: 1px solid var(--stroke2);
  font-weight: 850;
  background: var(--soft);
}
.ss-reg__flash.error{ background: rgba(255,0,0,.06); border-color: rgba(255,0,0,.16); }
.ss-reg__flash.warning{ background: rgba(255,181,71,.12); border-color: rgba(255,181,71,.22); }
.ss-reg__flash.success{ background: rgba(34,197,94,.12); border-color: rgba(34,197,94,.22); }
.ss-reg__flash.info{ background: rgba(47,123,255,.10); border-color: rgba(47,123,255,.20); }

/* Form */
.ss-reg__form{ margin-top: 14px; display:grid; gap: 14px; }

.ss-reg__grid2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
@media(max-width: 560px){
  .ss-reg__grid2{ grid-template-columns: 1fr; }
}

/* Fields */
.ss-reg__field label{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 10px;
  font-weight: 950;
  font-size: .82rem;
  color: var(--muted2);
  margin-bottom: 6px;
}
.ss-reg__hint{
  font-weight: 850;
  color: var(--muted2);
  font-size: .78rem;
}

/* Inputs */
.ss-reg__input{
  width:100%;
  padding: 15px 15px;
  border-radius: 16px;
  border: 1px solid var(--stroke);
  font-weight: 780;
  font-size: 1rem;
  background: color-mix(in srgb, var(--card) 92%, transparent);
  color: color-mix(in srgb, var(--ink) 92%, transparent);
  transition: box-shadow .16s var(--ease), border-color .16s var(--ease), transform .16s var(--ease), background .16s var(--ease);
}
.ss-reg__input::placeholder{ color: color-mix(in srgb, var(--muted) 85%, transparent); }
.ss-reg__input:hover{
  border-color: color-mix(in srgb, var(--ink) 18%, transparent);
}
.ss-reg__input:focus{ outline:none; }
.ss-reg__input:focus-visible{
  border-color: color-mix(in srgb, var(--p) 48%, transparent);
  box-shadow: var(--ring2);
}
.ss-reg__input:disabled{
  opacity: .7;
  cursor:not-allowed;
  background: color-mix(in srgb, var(--soft) 70%, transparent);
}
.ss-reg__input.is-error{
  border-color: color-mix(in srgb, var(--bad) 55%, transparent);
  box-shadow: 0 0 0 4px rgba(239,68,68,.12);
}
.ss-reg__input.is-ok{
  border-color: color-mix(in srgb, var(--good) 48%, transparent);
  box-shadow: 0 0 0 4px rgba(16,185,129,.10);
}

/* Autofill (light + dark) */
.ss-reg__input:-webkit-autofill{
  -webkit-text-fill-color: color-mix(in srgb, var(--ink) 92%, transparent);
  transition: background-color 5000s ease-in-out 0s;
  box-shadow: 0 0 0 1000px color-mix(in srgb, var(--card) 92%, transparent) inset;
}

/* Inline msg (con iconito) */
.ss-reg__msg{
  margin-top: 7px;
  font-size: .84rem;
  font-weight: 850;
  color: var(--muted2);
  min-height: 18px;
  display:flex;
  align-items:center;
  gap: 8px;
}
.ss-reg__msg::before{
  content:"";
  width:10px;height:10px;border-radius:999px;
  background: color-mix(in srgb, var(--muted2) 45%, transparent);
  flex: 0 0 auto;
  opacity:.9;
}
.ss-reg__msg.is-bad{ color: rgba(239,68,68,.95); }
.ss-reg__msg.is-bad::before{ background: rgba(239,68,68,.95); }
.ss-reg__msg.is-ok{ color: rgba(16,185,129,.95); }
.ss-reg__msg.is-ok::before{ background: rgba(16,185,129,.95); }

/* Password */
.ss-reg__pass-wrap{ position:relative; }
.ss-reg__pass-toggle{
  position:absolute;
  right:10px;
  top:50%;
  transform: translateY(-50%);
  border:1px solid var(--stroke2);
  background: color-mix(in srgb, var(--card) 92%, transparent);
  border-radius: 12px;
  padding: 7px 10px;
  cursor:pointer;
  font-weight: 950;
  color: color-mix(in srgb, var(--ink) 80%, transparent);
  transition: transform .16s var(--ease), box-shadow .16s var(--ease), border-color .16s var(--ease);
}
@media (hover:hover){
  .ss-reg__pass-toggle:hover{
    transform: translateY(calc(-50% - 1px));
    border-color: color-mix(in srgb, var(--p) 20%, var(--stroke2));
    box-shadow: var(--shadow3);
  }
}
.ss-reg__pass-toggle:focus-visible{
  outline: 3px solid rgba(59,130,246,.35);
  outline-offset: 2px;
}

/* Meter */
.ss-reg__meter{
  height: 8px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--p) 10%, transparent);
  overflow:hidden;
  border: 1px solid var(--stroke2);
  margin-top: 8px;
}
.ss-reg__meter span{
  display:block;
  height:100%;
  width:0%;
  background: linear-gradient(135deg, var(--p), var(--p2));
  transition: width .22s var(--ease2);
}
.ss-reg__meter.is-weak span{ width: 28% !important; }
.ss-reg__meter.is-ok span{ width: 62% !important; }
.ss-reg__meter.is-strong span{ width: 100% !important; }

.ss-reg__strength{
  margin-top: 8px;
  font-size: .86rem;
  font-weight: 950;
  color: var(--muted2);
}
.ss-reg__strength.weak{ color: rgba(239,68,68,.95); }
.ss-reg__strength.ok{ color: rgba(245,158,11,.95); }
.ss-reg__strength.strong{ color: rgba(16,185,129,.95); }

.ss-reg__rules{
  margin-top: 8px;
  font-size: .82rem;
  color: var(--muted2);
  font-weight: 770;
  display:grid;
  gap: 4px;
}

.ss-reg__match{
  margin-top: 8px;
  font-size: .86rem;
  color: var(--muted2);
  font-weight: 950;
}
.ss-reg__match.ok{ color: rgba(16,185,129,.95); }
.ss-reg__match.bad{ color: rgba(239,68,68,.95); }

/* Affiliate */
.ss-reg__aff{
  margin-top: 4px;
  border-radius: 20px;
  border: 1px solid var(--stroke2);
  background: var(--soft);
  overflow:hidden;
}
.ss-reg__aff-head{
  padding: 14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 12px;
}
.ss-reg__aff-head b{ font-weight: 1000; }

.ss-reg__switch{ display:flex; align-items:center; gap:10px; }
.ss-reg__switch input{ display:none; }
.ss-reg__toggle{
  width:56px; height:30px;
  border-radius:999px;
  border:1px solid var(--stroke2);
  background: color-mix(in srgb, var(--card) 92%, transparent);
  position:relative;
  cursor:pointer;
  transition: box-shadow .16s var(--ease);
}
.ss-reg__toggle::after{
  content:"";
  width:24px;height:24px;
  border-radius: 999px;
  background: linear-gradient(135deg, var(--p), var(--p2));
  position:absolute;
  top:50%;
  left:3px;
  transform: translateY(-50%);
  transition: left .22s var(--ease2), transform .22s var(--ease2);
}
.ss-reg__switch input:checked + .ss-reg__toggle{
  box-shadow: 0 0 0 4px color-mix(in srgb, var(--p) 12%, transparent);
}
.ss-reg__switch input:checked + .ss-reg__toggle::after{
  left:29px;
  transform: translateY(-50%) scale(1.02);
}

.ss-reg__aff-body{
  max-height: 0;
  overflow:hidden;
  padding: 0 14px;
  border-top: 1px solid rgba(15,23,42,.08);
  transition: max-height .34s var(--ease2), padding .34s var(--ease2);
}
.ss-reg__aff-body.is-open{
  max-height: 280px;
  padding: 14px;
}
@media (prefers-color-scheme: dark){
  .ss-reg__aff-body{ border-top-color: rgba(240,246,255,.10); }
}
.ss-reg__affNote{
  margin-top: 10px;
  font-weight: 850;
  font-size: .9rem;
  color: var(--muted);
}

/* Submit */
.ss-reg__submit{
  margin-top: 6px;
  padding: 16px;
  border-radius: 18px;
  background: linear-gradient(135deg, var(--p), var(--p2));
  color:#fff;
  border:0;
  font-weight: 1000;
  font-size: 1.05rem;
  box-shadow: 0 20px 40px rgba(2,6,23,.22);
  cursor:pointer;
  transition: transform .18s var(--ease), box-shadow .18s var(--ease), opacity .18s var(--ease), filter .18s var(--ease);
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 10px;
  position: relative;
  overflow:hidden;
}
@media (hover:hover){
  .ss-reg__submit:hover{
    transform: translateY(-2px);
    box-shadow: 0 26px 60px rgba(2,6,23,.26);
    filter: saturate(1.05);
  }
}
.ss-reg__submit:active{ transform: translateY(0); }
.ss-reg__submit:focus-visible{
  outline: 3px solid rgba(59,130,246,.35);
  outline-offset: 2px;
}
.ss-reg__submit[disabled]{ opacity: .82; cursor:not-allowed; }

/* subtle shimmer on hover */
.ss-reg__submit::after{
  content:"";
  position:absolute;
  inset:-30% -50%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.22), transparent);
  transform: rotate(16deg) translateX(-60%);
  opacity: 0;
  transition: opacity .22s var(--ease);
  pointer-events:none;
}
@media (hover:hover){
  .ss-reg__submit:hover::after{ opacity: .85; }
}

.ss-reg__btnSpin{
  width: 16px;
  height: 16px;
  border-radius: 999px;
  border: 2px solid rgba(255,255,255,.40);
  border-top-color: rgba(255,255,255,.95);
  display:none;
  animation: ssSpin .8s linear infinite;
}
@keyframes ssSpin{ to{ transform: rotate(360deg); } }
.ss-reg__submit.is-loading .ss-reg__btnSpin{ display:inline-block; }

/* Footer */
.ss-reg__footer{
  margin-top: 12px;
  font-size: .84rem;
  color: var(--muted2);
  line-height: 1.45;
  font-weight: 800;
}
.ss-reg__footer a{
  font-weight: 950;
  text-decoration:none;
  color: color-mix(in srgb, var(--ink) 84%, transparent);
  position:relative;
  padding-bottom: 1px;
}
.ss-reg__footer a::after{
  content:"";
  position:absolute;
  left:0; right:0; bottom:0;
  height:1px;
  background: rgba(15,23,42,.20);
  transform: scaleX(.7);
  transform-origin:left;
  transition: transform .22s var(--ease), background .22s var(--ease);
}
.ss-reg__footer a:hover::after{
  background: color-mix(in srgb, var(--p) 55%, transparent);
  transform: scaleX(1);
}

/* Focus visible general */
.ss-reg :where(a,button,input,[tabindex]):focus-visible{
  outline:none;
  box-shadow: var(--ring);
  border-radius: 16px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .ss-reg *{ transition:none !important; animation:none !important; }
  .ss-reg__submit:hover{ transform:none !important; }
}

/* Forced colors (Windows HC) */
@media (forced-colors: active){
  .ss-reg__card, .ss-reg__input, .ss-reg__submit, .ss-reg__toggle{
    forced-color-adjust: auto;
    border: 1px solid CanvasText;
  }
}

/* Print safe */
@media print{
  .ss-reg__bg{ display:none !important; }
  .ss-reg__card{ box-shadow:none !important; background:#fff !important; }
  .ss-reg__submit{ display:none !important; }
}
/* =========================================================
   SKYLINE STORE — REGISTER PATCH (+20 mejoras EXTRA)
   Pegar al FINAL para override seguro.
   Enfocado en: compatibilidad Safari, performance, a11y, fallbacks.
========================================================= */

/* 1) Mejor baseline para box-sizing (evita bugs de layout) */
.ss-reg, .ss-reg * { box-sizing: border-box; }

/* 2) Container queries friendly (si mañana usás container-type) */
.ss-reg__shell { container-type: inline-size; }

/* 3) Fallbacks para browsers sin color-mix() */
@supports not (color: color-mix(in srgb, #000 50%, transparent)){
  .ss-reg{
    --ring: 0 0 0 6px rgba(47,123,255,.18);
    --ring2: 0 0 0 4px rgba(47,123,255,.18);
  }
  .ss-reg__card:hover{ border-color: rgba(47,123,255,.22); }
  .ss-reg__input:focus-visible{ border-color: rgba(47,123,255,.55); box-shadow: 0 0 0 4px rgba(47,123,255,.18); }
  .ss-reg__step.is-active{ background: rgba(47,123,255,.14); border-color: rgba(47,123,255,.35); }
}

/* 4) Backdrop-filter fallback (si no soporta blur) */
@supports not ((backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px))){
  .ss-reg__card{ background: rgba(255,255,255,.95); }
  @media (prefers-color-scheme: dark){
    .ss-reg__card{ background: rgba(10,12,22,.92); }
  }
}

/* 5) Mejor rendering de fuentes + kerning */
.ss-reg{
  font-kerning: normal;
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
}

/* 6) Evitar “layout shift” en inputs (bordes/box-shadow) */
.ss-reg__input{ outline: none; }
.ss-reg__input:focus-visible{ transform: translateZ(0); }

/* 7) Mejor scroll en iOS / suavidad */
.ss-reg{ -webkit-overflow-scrolling: touch; }

/* 8) Tap targets más grandes en mobile */
@media (max-width: 560px){
  .ss-reg__pass-toggle{ padding: 10px 12px; }
  .ss-reg__submit{ padding: 18px; }
}

/* 9) Evitar selección accidental (micro UX) en botones/steps */
.ss-reg__submit,
.ss-reg__step,
.ss-reg__pass-toggle,
.ss-reg__toggle,
.ss-reg__kbd{
  user-select: none;
  -webkit-user-select: none;
}

/* 10) Mejor focus ring: no romper border-radius */
.ss-reg :where(a,button,input,[tabindex]):focus-visible{
  border-radius: 16px;
}

/* 11) Preferencias de usuario: reduce transparency */
@media (prefers-reduced-transparency: reduce){
  .ss-reg__card{ backdrop-filter: none; -webkit-backdrop-filter: none; }
  .ss-reg__bg, .ss-reg__orb{ filter: none; opacity: .35; }
}

/* 12) Mejor soporte para forced colors (Windows HC) */
@media (forced-colors: active){
  .ss-reg__submit{ background: ButtonFace !important; color: ButtonText !important; }
  .ss-reg__kbd{ background: Canvas !important; }
}

/* 13) Mejora del grid/blur para rendimiento (evita repaints) */
.ss-reg__bg,
.ss-reg__orb,
.ss-reg__grid{
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* 14) Imagen de fondo/noise: evita banding */
.ss-reg__bg::before{
  background-blend-mode: screen;
}

/* 15) Accesibilidad: placeholder con contraste mejor (dark) */
@media (prefers-color-scheme: dark){
  .ss-reg__input::placeholder{ color: rgba(240,246,255,.55); }
}

/* 16) Inputs: readonly (mejor UX) */
.ss-reg__input[readonly]{
  cursor: default;
  opacity: .9;
  background: rgba(2,6,23,.03);
}
@media (prefers-color-scheme: dark){
  .ss-reg__input[readonly]{ background: rgba(255,255,255,.06); }
}

/* 17) Estados invalid/valid HTML nativos */
.ss-reg__input:invalid{
  border-color: rgba(239,68,68,.35);
}
.ss-reg__input:valid{
  border-color: rgba(16,185,129,.22);
}

/* 18) Mejor “rail” steps: limita altura y overflow */
.ss-reg__steps{ align-items: stretch; }
.ss-reg__step{ min-height: 44px; }

/* 19) Hover safe para touch devices: sin hover fantasma */
@media (hover: none){
  .ss-reg__card:hover{ box-shadow: var(--shadow); border-color: var(--stroke); }
  .ss-reg__submit:hover{ transform:none; filter:none; }
}

/* 20) Animación de shimmer más suave (menos molesta) */
@media (hover:hover){
  .ss-reg__submit::after{
    transition: opacity .22s var(--ease), transform .55s var(--ease2);
  }
  .ss-reg__submit:hover::after{
    transform: rotate(16deg) translateX(30%);
  }
}

/* 21) Fix: Autofill dark (Safari/Chrome) con mejor contraste */
@media (prefers-color-scheme: dark){
  .ss-reg__input:-webkit-autofill{
    -webkit-text-fill-color: rgba(240,246,255,.92);
    box-shadow: 0 0 0 1000px rgba(12,16,34,.60) inset;
  }
}

/* 22) Mejor “loading” UX: desactiva hover y muestra cursor */
.ss-reg__submit.is-loading{
  cursor: progress;
  filter: saturate(1);
}
.ss-reg__submit.is-loading:hover{ transform:none; box-shadow: 0 20px 40px rgba(2,6,23,.22); }

/* 23) Skeleton shimmer listo (si agregás loaders) */
.ss-reg__skeleton{
  border-radius: 16px;
  background: linear-gradient(90deg, rgba(2,6,23,.04), rgba(2,6,23,.08), rgba(2,6,23,.04));
  background-size: 200% 100%;
  animation: ssSk 1.05s linear infinite;
}
@keyframes ssSk{ to{ background-position: -200% 0; } }
@media (prefers-color-scheme: dark){
  .ss-reg__skeleton{
    background: linear-gradient(90deg, rgba(255,255,255,.05), rgba(255,255,255,.09), rgba(255,255,255,.05));
  }
}

/* 24) Mejor spacing vertical en pantallas bajas */
@media (max-height: 720px){
  .ss-reg{ padding: 14px 12px; }
  .ss-reg__left h1{ font-size: clamp(1.7rem, 4.2vw, 2.6rem); }
}

/* 25) Ultra: protege contra overflow horizontal raro */
.ss-reg{ overflow-x: clip; }
@supports not (overflow: clip){
  .ss-reg{ overflow-x: hidden; }
}
