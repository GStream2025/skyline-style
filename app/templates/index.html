{# templates/index.html ‚Äî SKYLINE STORE ¬∑ INDEX ULTRA FINAL (NO ERRORS) #}
{% extends "base.html" %}
{% block title %}Skyline Store ¬∑ Moda urbana premium{% endblock %}

{% block extra_head %}
<style>
/* ==========================================================
   SKYLINE STORE ‚Äî INDEX ULTRA FINAL (LIGHT ¬∑ PREMIUM)
   - copy sin dropshipping
   - hero con fondo real + glass spotlight
   - skeleton fallbacks seguros
   - UX premium + accesible
========================================================== */

/* ---------- TOKENS ---------- */
:root{
  --bg0:#f7f8fb;
  --bg1:#ffffff;
  --ink:#0b1220;
  --muted: rgba(11,18,32,.68);
  --muted2: rgba(11,18,32,.55);

  --a:#2563eb;  /* blue */
  --b:#06b6d4;  /* cyan */
  --c:#f59e0b;  /* amber */
  --d:#22c55e;  /* green */
  --p:#a855f7;  /* purple */

  --glass: rgba(255,255,255,.78);
  --glass2: rgba(255,255,255,.92);

  --shadow1: 0 12px 28px rgba(2,6,23,.10);
  --shadow2: 0 24px 70px rgba(2,6,23,.14);

  --r2: 1.55rem;
  --r3: 2.1rem;

  --ring: 0 0 0 3px rgba(37,99,235,.22);
  --grid: 1200px;
}

.container{
  width:100%;
  max-width: var(--grid);
  margin:0 auto;
  padding: 0 1.1rem;
}
.section{ padding: clamp(3.2rem, 6vw, 5rem) 0; }
.sep{
  height:1px;
  background: linear-gradient(90deg, transparent, rgba(15,23,42,.10), transparent);
  margin: clamp(2.4rem, 4vw, 3.2rem) 0;
}

/* ---------- TYPO ---------- */
.badge{
  display:inline-flex;
  align-items:center;
  gap:.55rem;
  width: fit-content;
  padding:.42rem .86rem;
  border-radius:999px;
  border: 1px solid rgba(37,99,235,.18);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));
  box-shadow: 0 10px 20px rgba(2,6,23,.06);
  font-weight:950;
  font-size:.82rem;
  color: rgba(37,99,235,.96);
}
.badge::before{
  content:"";
  width:10px;height:10px;border-radius:999px;
  background: radial-gradient(circle at 30% 30%, #60a5fa, #2563eb);
  box-shadow: 0 0 0 4px rgba(37,99,235,.12);
}
.h2{
  font-size: clamp(1.58rem, 2.6vw, 2.15rem);
  line-height:1.12;
  font-weight: 980;
  letter-spacing: -.65px;
  margin:.8rem 0 0;
  color: var(--ink);
}
.p{
  margin:.75rem 0 0;
  color: var(--muted);
  line-height:1.75;
  font-size: 1.02rem;
}

/* ---------- BUTTONS ---------- */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.55rem;
  border-radius:999px;
  padding:.92rem 2.25rem;
  font-weight: 980;
  border:1px solid transparent;
  text-decoration:none;
  transition: transform .18s ease, box-shadow .18s ease, filter .18s ease, border-color .18s ease;
  user-select:none;
}
.btn:hover{ transform: translateY(-2px); filter:saturate(1.05); }
.btn:focus-visible{ outline:none; box-shadow: var(--ring), var(--shadow1); }

.btn-primary{
  position:relative;
  color:#fff;
  background: linear-gradient(135deg, var(--a), var(--b));
  box-shadow: var(--shadow2);
}
.btn-primary::after{
  content:"";
  position:absolute; inset:0;
  border-radius:999px;
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,.34) 40%, transparent 70%);
  transform: translateX(-60%);
  opacity:0;
}
@media (prefers-reduced-motion: no-preference){
  .btn-primary:hover::after{ opacity:.9; animation: shine .9s ease forwards; }
  @keyframes shine{ to{ transform: translateX(70%); opacity:0; } }
}
.btn-secondary{
  color: var(--ink);
  background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(255,255,255,.72));
  border-color: rgba(15,23,42,.12);
  box-shadow: var(--shadow1);
}
.btn-secondary:hover{ border-color: rgba(37,99,235,.28); }

.btn-mini{ padding:.74rem 1.15rem; font-size:.92rem; }
.btn-ghost{
  background: rgba(255,255,255,.78);
  border:1px solid rgba(15,23,42,.12);
  color: var(--ink);
}
.btn-ghost:hover{ border-color: rgba(37,99,235,.22); }

/* ==========================================================
   HERO ‚Äî fondo real + glass spotlight (mejora premium #1)
========================================================== */
.hero{
  position:relative;
  min-height: min(100vh, 980px);
  display:flex;
  align-items:center;
  overflow:hidden;

  background:
    radial-gradient(1400px 900px at 12% 10%, rgba(37,99,235,.16), transparent 56%),
    radial-gradient(1300px 800px at 88% 18%, rgba(245,158,11,.14), transparent 62%),
    radial-gradient(1000px 700px at 55% 92%, rgba(34,197,94,.12), transparent 58%),
    linear-gradient(180deg, rgba(255,255,255,.88) 0%, rgba(247,248,251,.92) 100%),
    url("{{ url_for('static', filename='img/hero/fondo.png') }}");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  color: var(--ink);
}
.hero::before{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  background: radial-gradient(900px 520px at 18% 35%, rgba(255,255,255,.68), transparent 62%);
  opacity:.75;
  z-index:0;
}
.hero::after{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:.055;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.85'/%3E%3C/svg%3E");
  mix-blend-mode:multiply;
  z-index:0;
}

/* blobs suaves */
.hero-bg{
  position:absolute;
  inset:-10%;
  z-index:0;
  filter: blur(42px) saturate(1.2);
  opacity:.9;
}
.hero-bg .blob{ position:absolute; border-radius:999px; transform: translateZ(0); will-change: transform; }
.hero-bg .b1{ width:540px;height:540px; left:-90px; top:-70px;
  background: radial-gradient(circle at 30% 30%, rgba(37,99,235,.40), transparent 60%); }
.hero-bg .b2{ width:540px;height:540px; right:-130px; top:-55px;
  background: radial-gradient(circle at 45% 35%, rgba(245,158,11,.30), transparent 62%); }
.hero-bg .b3{ width:560px;height:560px; left:30%; bottom:-250px;
  background: radial-gradient(circle at 40% 40%, rgba(34,197,94,.24), transparent 64%); }

@media (prefers-reduced-motion: no-preference){
  .hero-bg .b1{ animation: float1 10s ease-in-out infinite; }
  .hero-bg .b2{ animation: float2 12s ease-in-out infinite; }
  .hero-bg .b3{ animation: float3 14s ease-in-out infinite; }
  @keyframes float1{ 0%,100%{transform:translate(0,0)} 50%{transform:translate(18px,12px)} }
  @keyframes float2{ 0%,100%{transform:translate(0,0)} 50%{transform:translate(-18px,10px)} }
  @keyframes float3{ 0%,100%{transform:translate(0,0)} 50%{transform:translate(12px,-16px)} }
}

.hero-inner{ position:relative; z-index:2; width:100%; padding: clamp(5.2rem, 10vh, 7.4rem) 0 4.2rem; }
.hero-grid{
  display:grid;
  grid-template-columns: 1fr;
  gap: clamp(1.8rem, 4vw, 3.2rem);
  align-items:center;
}
@media (min-width: 980px){ .hero-grid{ grid-template-columns: 1.08fr .92fr; } }

.hero-title{
  font-size: clamp(2.35rem, 4.9vw, 3.65rem);
  line-height:1.03;
  font-weight: 990;
  letter-spacing:-.95px;
  margin:.75rem 0 0;
}
.hero-title .grad{
  background: linear-gradient(135deg,
    rgba(11,18,32,1) 0%,
    rgba(11,18,32,1) 36%,
    rgba(37,99,235,.98) 70%,
    rgba(6,182,212,.98) 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color: transparent;
}
.hero-sub{
  margin: .9rem 0 0;
  max-width: 52rem;
  color: rgba(11,18,32,.70);
  font-size: 1.06rem;
  line-height:1.75;
}

/* ‚úÖ mejora premium: ‚Äúglass spotlight card‚Äù en el texto */
.hero-card{
  display:inline-block;
  margin-top: .9rem;
  padding: .85rem 1rem;
  border-radius: 1.2rem;
  background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.60));
  border: 1px solid rgba(15,23,42,.10);
  box-shadow: 0 18px 55px rgba(2,6,23,.10);
  backdrop-filter: blur(14px);
}
.hero-cta{ display:flex; flex-wrap:wrap; gap:.75rem; margin-top:1.15rem; }
.hero-chips{ display:flex; flex-wrap:wrap; gap:.55rem; margin-top:1.05rem; }
.chip{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.46rem .86rem; border-radius:999px;
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.78);
  backdrop-filter: blur(12px);
  box-shadow: 0 10px 22px rgba(2,6,23,.06);
  font-size:.78rem; color: rgba(11,18,32,.74);
}
.chip::before{ content:"‚úì"; font-weight: 990; color: rgba(34,197,94,.95); }

/* ---------- RIGHT PANEL ---------- */
.panel{
  position:relative;
  border-radius: var(--r3);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));
  border: 1px solid rgba(15,23,42,.10);
  box-shadow: var(--shadow2);
  padding: 1.05rem;
  overflow:hidden;
  backdrop-filter: blur(14px);
}
.panel::before{
  content:"";
  position:absolute; inset:-2px;
  background: linear-gradient(135deg,
    rgba(37,99,235,.18),
    rgba(6,182,212,.16),
    rgba(245,158,11,.14),
    rgba(168,85,247,.12));
  opacity:.60;
  filter: blur(18px);
  z-index:0;
}
.panel-inner{ position:relative; z-index:1; }
.panel-head{ display:flex; align-items:flex-end; justify-content:space-between; gap:1rem; margin-bottom:.7rem; }
.panel-title{ font-weight: 990; letter-spacing:-.2px; font-size: .98rem; }
.panel-hint{ color: rgba(11,18,32,.55); font-weight:950; font-size:.82rem; }

/* scroller */
.scroller{
  display:flex; gap:.9rem;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  padding-bottom:.35rem;
  -webkit-overflow-scrolling: touch;
}
.scroller::-webkit-scrollbar{ height: 10px; }
.scroller::-webkit-scrollbar-thumb{ background: rgba(15,23,42,.16); border-radius: 999px; }
.scroller::-webkit-scrollbar-track{ background: transparent; }

/* card categor√≠a */
.cat{
  position:relative;
  flex:0 0 54%;
  max-width: 270px;
  scroll-snap-align:start;
  border-radius: 1.2rem;
  border:1px solid rgba(15,23,42,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(255,255,255,.72));
  box-shadow: var(--shadow1);
  padding:.74rem;
  text-decoration:none;
  color: inherit;
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
  overflow:hidden;
}
.cat::after{
  content:"";
  position:absolute; inset:-40% -60%;
  background:
    radial-gradient(circle at 30% 30%, rgba(37,99,235,.18), transparent 60%),
    radial-gradient(circle at 70% 60%, rgba(245,158,11,.12), transparent 62%),
    radial-gradient(circle at 55% 40%, rgba(168,85,247,.10), transparent 65%);
  opacity:.65;
  transform: rotate(12deg);
  pointer-events:none;
}
.cat:hover{ transform: translateY(-6px); box-shadow: var(--shadow2); border-color: rgba(37,99,235,.22); }

.cat img{
  width:100%;
  height: 8.2rem;
  object-fit: cover;
  border-radius: 1rem;
  border:1px solid rgba(15,23,42,.10);
  box-shadow: 0 10px 18px rgba(2,6,23,.08);
  background:#fff;
  margin-bottom:.6rem;
}

/* ‚úÖ mejora premium #3: skeleton */
.skeleton{
  display:none;
  width:100%;
  height: 8.2rem;
  border-radius: 1rem;
  border:1px solid rgba(15,23,42,.10);
  background:
    linear-gradient(90deg, rgba(226,232,240,.55) 0%, rgba(226,232,240,.25) 45%, rgba(226,232,240,.55) 100%);
  background-size: 200% 100%;
  animation: sk 1.2s ease-in-out infinite;
  margin-bottom:.6rem;
}
@keyframes sk{ 0%{background-position:0% 0} 100%{background-position:200% 0} }

.fallback{
  display:none;
  width:100%;
  height: 8.2rem;
  border-radius: 1rem;
  border:1px dashed rgba(15,23,42,.20);
  background: rgba(255,255,255,.65);
  place-items:center;
  text-align:center;
  padding:.8rem;
  margin-bottom:.6rem;
  color: rgba(11,18,32,.70);
}

.cat-title{ font-weight: 990; font-size: .96rem; letter-spacing:-.2px; position:relative; z-index:1; }
.cat-sub{ font-size: .8rem; color: rgba(11,18,32,.66); margin-top:.14rem; position:relative; z-index:1; }

/* ==========================================================
   FEATURED
========================================================== */
.grid3{ display:grid; grid-template-columns:1fr; gap:1rem; margin-top:1.25rem; }
@media (min-width: 860px){ .grid3{ grid-template-columns: repeat(3, 1fr); } }

.product{
  border-radius: var(--r2);
  border:1px solid rgba(15,23,42,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(255,255,255,.74));
  box-shadow: var(--shadow1);
  overflow:hidden;
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
}
.product:hover{ transform: translateY(-6px); box-shadow: var(--shadow2); border-color: rgba(37,99,235,.18); }

.product-media{ position:relative; background:#fff; height:190px; display:block; }
.product-media img{ width:100%; height:100%; object-fit:cover; display:block; }
.product-media .fallback{ display:none; height:190px; margin:0; border:0; }

.product-body{ padding: .98rem 1.02rem 1.05rem; }
.product-top{ display:flex; align-items:center; justify-content:space-between; gap:.8rem; }

.tag{
  display:inline-flex; align-items:center; gap:.45rem;
  padding:.32rem .65rem;
  border-radius:999px;
  font-weight:980;
  font-size:.75rem;
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.80);
}
.tag.hot{ border-color: rgba(245,158,11,.25); }
.tag.new{ border-color: rgba(37,99,235,.22); }
.tag.best{ border-color: rgba(34,197,94,.22); }

.price{ font-weight: 990; letter-spacing:-.2px; }
.product-title{ margin:.65rem 0 .3rem; font-weight: 990; letter-spacing:-.35px; }
.product-desc{ margin:0; color: var(--muted); line-height:1.65; font-size:.96rem; }

/* ‚úÖ mejora premium #4: acciones */
.product-actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.9rem; }
.icon-btn{
  display:inline-flex;
  align-items:center; justify-content:center;
  width: 42px; height: 42px;
  border-radius: 999px;
  border: 1px solid rgba(15,23,42,.12);
  background: rgba(255,255,255,.78);
  box-shadow: 0 10px 18px rgba(2,6,23,.06);
  cursor:pointer;
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.icon-btn:hover{ transform: translateY(-2px); box-shadow: var(--shadow2); border-color: rgba(37,99,235,.22); }
.icon-btn:focus-visible{ outline:none; box-shadow: var(--ring); }
.icon-btn[data-on="true"]{ border-color: rgba(245,158,11,.28); }

/* ==========================================================
   BENEFITS / REVIEWS / CTA
========================================================== */
.benefits{ margin-top:1.25rem; display:grid; grid-template-columns:1fr; gap:.95rem; }
@media (min-width:900px){ .benefits{ grid-template-columns: repeat(4, 1fr); } }
.benefit{
  border-radius: var(--r2);
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.78);
  backdrop-filter: blur(12px);
  box-shadow: var(--shadow1);
  padding: 1rem 1rem 1.1rem;
}
.benefit .ico{
  width:42px;height:42px;border-radius:14px;
  display:grid; place-items:center;
  background: linear-gradient(135deg, rgba(37,99,235,.18), rgba(6,182,212,.14));
  border:1px solid rgba(37,99,235,.14);
  margin-bottom:.55rem;
  font-weight: 990;
}
.benefit h3{ margin:.15rem 0 .25rem; font-size: .99rem; font-weight: 990; letter-spacing:-.2px; }
.benefit p{ margin:0; color: var(--muted); line-height:1.65; font-size:.95rem; }

.reviews{ margin-top:1.25rem; display:grid; grid-template-columns:1fr; gap:1rem; }
@media (min-width:900px){ .reviews{ grid-template-columns: repeat(3, 1fr); } }
.review{
  border-radius: var(--r2);
  border:1px solid rgba(15,23,42,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.76));
  box-shadow: var(--shadow1);
  padding: 1.05rem 1.05rem 1rem;
  position:relative;
  overflow:hidden;
}
.review::before{
  content:"";
  position:absolute; inset:-30% -40%;
  background:
    radial-gradient(circle at 30% 30%, rgba(37,99,235,.16), transparent 62%),
    radial-gradient(circle at 80% 40%, rgba(245,158,11,.12), transparent 62%);
  opacity:.55;
  transform: rotate(8deg);
}
.review .inner{ position:relative; z-index:1; }
.stars{ letter-spacing:1px; font-weight: 990; }
.review p{ margin:.55rem 0 .85rem; color: var(--muted); line-height:1.75; }
.person{ display:flex; align-items:center; gap:.7rem; }
.avatar{
  width:42px;height:42px;border-radius:14px;
  background: linear-gradient(135deg, rgba(168,85,247,.18), rgba(6,182,212,.14));
  border:1px solid rgba(15,23,42,.10);
}
.person b{ display:block; font-weight: 990; }
.person span{ display:block; color: var(--muted2); font-size:.88rem; }

.cta-band{
  border-radius: var(--r3);
  border:1px solid rgba(15,23,42,.10);
  background: linear-gradient(135deg,
    rgba(37,99,235,.16),
    rgba(6,182,212,.14),
    rgba(245,158,11,.12),
    rgba(34,197,94,.12));
  box-shadow: var(--shadow2);
  padding: 1.25rem;
  overflow:hidden;
  position:relative;
}
.cta-band::after{
  content:"";
  position:absolute; inset:-30%;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.52), transparent 60%);
  filter: blur(20px);
  opacity:.6;
}
.cta-band .row{
  position:relative;
  z-index:1;
  display:flex;
  flex-direction:column;
  gap:.9rem;
}
@media (min-width:900px){
  .cta-band .row{ flex-direction:row; align-items:center; justify-content:space-between; gap:1.2rem; }
}
.cta-band h3{ margin:0; font-size: 1.26rem; font-weight: 990; letter-spacing:-.45px; }
.cta-band p{ margin:.25rem 0 0; color: rgba(11,18,32,.72); }

.form{ display:flex; flex-wrap:wrap; gap:.6rem; margin-top:.35rem; }
.input{
  min-width:240px;
  flex:1;
  padding:.9rem 1rem;
  border-radius:999px;
  border:1px solid rgba(15,23,42,.14);
  background: rgba(255,255,255,.88);
  box-shadow: 0 10px 18px rgba(2,6,23,.06);
}
.input:focus-visible{ outline:none; box-shadow: var(--ring); }
.helper{ margin:.55rem 0 0; color: var(--muted2); font-size:.92rem; }

.quick{ display:grid; grid-template-columns:1fr; gap:1rem; margin-top:1.25rem; }
@media (min-width:900px){ .quick{ grid-template-columns: 1.15fr .85fr; align-items:start; } }
.box{
  border-radius: var(--r2);
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.78);
  box-shadow: var(--shadow1);
  padding: 1rem;
}
.links{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:.55rem 1rem;
  margin-top:.9rem;
}
.links a{
  color: rgba(11,18,32,.82);
  text-decoration:none;
  font-weight:980;
  font-size:.95rem;
}
.links a:hover{ text-decoration: underline; }

@media (prefers-reduced-motion: reduce){
  *{ animation:none!important; transition:none!important; scroll-behavior:auto!important; }
}
</style>
{% endblock %}

{% block content %}

{# ‚úÖ URLs 100% seguros (NO usan current_app, NO rompen Jinja) #}
{% set URL_SHOP = '/shop' %}
{% set URL_PROFILE = '/profile' %}

<section class="hero" aria-label="Hero Skyline Store">
  <div class="hero-bg" aria-hidden="true">
    <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div>
  </div>

  <div class="hero-inner">
    <div class="container">
      <div class="hero-grid">

        <!-- LEFT -->
        <header>
          <div class="badge">Skyline Store ¬∑ Online</div>

          <h1 class="hero-title">
            <span class="grad">Skyline Store</span><br>
            Moda urbana & accesorios premium
          </h1>

          <div class="hero-card">
            <p class="hero-sub" style="margin:0;">
              Productos atentamente seleccionados: prendas urbanas, accesorios novedosos y mucho m√°s.
              Calidad, estilo y una experiencia simple para comprar.
            </p>

            <div class="hero-cta">
              <a href="{{ URL_SHOP }}" class="btn btn-primary" aria-label="Ir a la tienda">Ver tienda ‚Üí</a>
              <a href="#categorias" class="btn btn-secondary" aria-label="Explorar categor√≠as">Explorar categor√≠as</a>
            </div>

            <div class="hero-chips" aria-label="Confianza y beneficios">
              <span class="chip">Pagos seguros</span>
              <span class="chip">Selecci√≥n verificada</span>
              <span class="chip">Env√≠os r√°pidos</span>
              <span class="chip">Atenci√≥n real</span>
            </div>
          </div>
        </header>

        <!-- RIGHT -->
        <aside id="categorias" class="panel" aria-label="Categor√≠as destacadas">
          <div class="panel-inner">
            <div class="panel-head">
              <div class="panel-title">Categor√≠as destacadas</div>
              <div class="panel-hint">desliz√° ‚Üí</div>
            </div>

            {% set cats = [
              {"slug":"buzos","img":"card_buzos.png","price":"Desde $1.490"},
              {"slug":"remeras","img":"card_remeras.png","price":"Desde $1.480"},
              {"slug":"gorros","img":"card_gorras.png","price":"Desde $1.490"},
              {"slug":"accesorios","img":"card_accesorios.png","price":"Para todos"}
            ] %}

            <div class="scroller">
              {% for c in cats %}
              <a href="{{ URL_SHOP }}?categoria={{ c.slug }}" class="cat">
                <div class="skeleton" aria-hidden="true"></div>

                <img
                  src="{{ url_for('static', filename='img/hero/' ~ c.img) }}"
                  alt="{{ c.slug|capitalize }}"
                  loading="lazy"
                  decoding="async"
                  data-fallback-title="{{ c.slug|capitalize }}"
                  onload="this.previousElementSibling.style.display='none';"
                >

                <div class="fallback" aria-hidden="true">
                  <div style="font-weight:990;line-height:1.15;">{{ c.slug|capitalize }}</div>
                  <div style="opacity:.78;font-size:.86rem;margin-top:.15rem;">{{ c.price }}</div>
                </div>

                <div class="cat-title">{{ c.slug|capitalize }}</div>
                <div class="cat-sub">{{ c.price }}</div>
              </a>
              {% endfor %}
            </div>
          </div>
        </aside>

      </div>
    </div>
  </div>
</section>

<!-- DESTACADOS -->
<section class="section" id="destacados" aria-label="Productos destacados">
  <div class="container">
    <div class="badge">Selecci√≥n curada</div>
    <h2 class="h2">Destacados del momento</h2>
    <p class="p">Lo m√°s buscado y lo nuevo. Entr√°, eleg√≠ y compr√° sin vueltas.</p>

    {% set featured = [
      {"id":"hoodie","tag":"Nuevo","tag_cls":"new","title":"Hoodie Skyline Essential","desc":"Calce premium + estilo limpio, ideal para todos los d√≠as.","price":"$1.990","img":"featured_hoodie.jpg","href": URL_SHOP ~ "?categoria=buzos"},
      {"id":"remera","tag":"Hot","tag_cls":"hot","title":"Remera Skyline Street","desc":"Liviana, urbana y combinable. La base de cualquier outfit.","price":"$1.480","img":"featured_remera.jpg","href": URL_SHOP ~ "?categoria=remeras"},
      {"id":"gorra","tag":"Top","tag_cls":"best","title":"Gorra Skyline Classic","desc":"Minimal, pro y con actitud. Cierra el look.","price":"$1.490","img":"featured_gorra.jpg","href": URL_SHOP ~ "?categoria=gorros"}
    ] %}

    <div class="grid3">
      {% for p in featured %}
      <article class="product">
        <div class="product-media">
          <img
            src="{{ url_for('static', filename='img/hero/' ~ p.img) }}"
            alt="{{ p.title }}"
            loading="lazy"
            decoding="async"
            data-fallback-title="{{ p.title }}"
          >
          <div class="fallback" aria-hidden="true">
            <div style="font-weight:990;line-height:1.2;padding:1.1rem;text-align:center;">
              {{ p.title }}<br>
              <span style="opacity:.78;font-weight:800;font-size:.92rem;">Imagen faltante</span>
            </div>
          </div>
        </div>

        <div class="product-body">
          <div class="product-top">
            <span class="tag {{ p.tag_cls }}">{{ p.tag }}</span>
            <span class="price">{{ p.price }}</span>
          </div>

          <div class="product-title">{{ p.title }}</div>
          <p class="product-desc">{{ p.desc }}</p>

          <div class="product-actions">
            <a class="btn btn-primary btn-mini" href="{{ p.href }}">Ver en tienda</a>
            <a class="btn btn-ghost btn-mini" href="#newsletter">Recibir novedades</a>

            <!-- ‚úÖ Favorito (localStorage) -->
            <button class="icon-btn" type="button" aria-label="Guardar en favoritos" data-fav="{{ p.id }}">
              ‚≠ê
            </button>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>

    <div class="sep" role="presentation"></div>
  </div>
</section>

<!-- BENEFICIOS -->
<section class="section" id="beneficios" aria-label="Beneficios Skyline Store">
  <div class="container">
    <div class="badge">Experiencia premium</div>
    <h2 class="h2">Comprar ac√° se siente mejor</h2>
    <p class="p">Detalles que suman: confianza, rapidez y selecci√≥n real.</p>

    <div class="benefits">
      <div class="benefit"><div class="ico">üîí</div><h3>Pagos seguros</h3><p>Checkout confiable y procesos claros.</p></div>
      <div class="benefit"><div class="ico">‚úÖ</div><h3>Selecci√≥n real</h3><p>Productos elegidos con criterio y calidad.</p></div>
      <div class="benefit"><div class="ico">üöö</div><h3>Env√≠os r√°pidos</h3><p>Opciones √°giles y seguimiento cuando aplica.</p></div>
      <div class="benefit"><div class="ico">üí¨</div><h3>Atenci√≥n humana</h3><p>Te respondemos de verdad. Sin bots raros.</p></div>
    </div>

    <div class="sep" role="presentation"></div>
  </div>
</section>

<!-- REVIEWS -->
<section class="section" id="reviews" aria-label="Opiniones de clientes">
  <div class="container">
    <div class="badge">Social proof</div>
    <h2 class="h2">Lo que dicen cuando compran</h2>
    <p class="p">Confianza construida en experiencia y est√©tica.</p>

    <div class="reviews">
      <div class="review"><div class="inner"><div class="stars" aria-label="5 estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div><p>‚ÄúLleg√≥ r√°pido y el dise√±o se ve premium. La web es re c√≥moda.‚Äù</p><div class="person"><div class="avatar" aria-hidden="true"></div><div><b>Agus</b><span>Montevideo</span></div></div></div></div>
      <div class="review"><div class="inner"><div class="stars" aria-label="5 estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div><p>‚ÄúMe encant√≥ la selecci√≥n, no es el t√≠pico cat√°logo sin sentido.‚Äù</p><div class="person"><div class="avatar" aria-hidden="true"></div><div><b>Martina</b><span>Canelones</span></div></div></div></div>
      <div class="review"><div class="inner"><div class="stars" aria-label="5 estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div><p>‚ÄúLa est√©tica es otra cosa. Se nota que est√° pensado para vender.‚Äù</p><div class="person"><div class="avatar" aria-hidden="true"></div><div><b>Facu</b><span>Maldonado</span></div></div></div></div>
    </div>

    <div class="sep" role="presentation"></div>
  </div>
</section>

<!-- NEWSLETTER -->
<section class="section" id="newsletter" aria-label="Newsletter y novedades">
  <div class="container">
    <div class="cta-band">
      <div class="row">
        <div>
          <h3>Recib√≠ novedades, ofertas y lanzamientos</h3>
          <p>1 mail por semana. Sin spam. Te avisamos cuando sale lo bueno.</p>
        </div>

        <form class="form" onsubmit="return SkylineNewsletter.save(event)">
          <input class="input" type="email" name="email" required placeholder="Tu email (ej: gaby@gmail.com)" aria-label="Email">
          <button class="btn btn-primary" type="submit">Suscribirme</button>
        </form>
      </div>
      <p class="helper" id="newsletter-msg" role="status" aria-live="polite"></p>
    </div>

    <div class="quick">
      <div class="box">
        <h2 class="h2" style="font-size:1.35rem;margin:0;">Explor√° r√°pido</h2>
        <p class="p" style="margin-top:.55rem;">Entr√° directo a lo que quer√©s, sin perder tiempo.</p>

        <div class="links">
          <a href="{{ URL_SHOP }}?categoria=buzos">Buzos</a>
          <a href="{{ URL_SHOP }}?categoria=remeras">Remeras</a>
          <a href="{{ URL_SHOP }}?categoria=gorros">Gorros</a>
          <a href="{{ URL_SHOP }}?categoria=accesorios">Accesorios</a>
          <a href="{{ URL_SHOP }}">Todo el cat√°logo</a>
          <a href="{{ URL_PROFILE }}">Mi perfil</a>
        </div>
      </div>

      <div class="box">
        <h2 class="h2" style="font-size:1.35rem;margin:0;">Acci√≥n r√°pida</h2>
        <p class="p" style="margin-top:.55rem;">¬øListo para ver lo nuevo? Dale una vuelta a la tienda.</p>

        <div style="margin-top:.9rem; display:flex; gap:.6rem; flex-wrap:wrap;">
          <a class="btn btn-secondary btn-mini" href="{{ URL_SHOP }}">Ver tienda</a>
          <a class="btn btn-ghost btn-mini" href="#reviews">Ver rese√±as</a>
        </div>

        <p class="helper" style="margin-top:.85rem;">
          Tip: agreg√° WhatsApp / Instagram en el footer global (base.html) para convertir m√°s.
        </p>
      </div>
    </div>
  </div>
</section>

<script>
/* ==========================================================
   Fallback seguro para im√°genes:
   - si falla: oculta img, muestra fallback (y skeleton si aplica)
========================================================== */
(function(){
  const imgs = document.querySelectorAll("img[data-fallback-title]");
  imgs.forEach(img => {
    // skeleton visible hasta que cargue
    const sk = img.previousElementSibling;
    if (sk && sk.classList && sk.classList.contains("skeleton")) {
      sk.style.display = "block";
    }
    img.addEventListener("load", () => {
      if (sk && sk.classList && sk.classList.contains("skeleton")) sk.style.display = "none";
    }, { once:true });

    img.addEventListener("error", () => {
      const parent = img.parentElement;
      if(!parent) return;

      const fb = parent.querySelector(".fallback");
      if (fb) fb.style.display = "grid";

      if (sk && sk.classList && sk.classList.contains("skeleton")) sk.style.display = "none";
      img.style.display = "none";
    }, { once:true });
  });
})();

/* ==========================================================
   Favoritos (mejora premium #4):
   - guarda ids en localStorage
========================================================== */
(function(){
  const key = "skyline_favs";
  const read = () => {
    try { return JSON.parse(localStorage.getItem(key) || "[]"); }
    catch(e){ return []; }
  };
  const write = (arr) => {
    try { localStorage.setItem(key, JSON.stringify(arr)); } catch(e){}
  };

  const favs = new Set(read());
  const btns = document.querySelectorAll("button[data-fav]");
  btns.forEach(btn => {
    const id = btn.getAttribute("data-fav");
    const sync = () => {
      const on = favs.has(id);
      btn.dataset.on = on ? "true" : "false";
      btn.textContent = on ? "üíõ" : "‚≠ê";
      btn.setAttribute("aria-label", on ? "Quitar de favoritos" : "Guardar en favoritos");
    };
    sync();
    btn.addEventListener("click", () => {
      if (favs.has(id)) favs.delete(id);
      else favs.add(id);
      write([...favs]);
      sync();
    });
  });
})();

/* ==========================================================
   Newsletter PRO (mejora premium #5):
   - valida
   - guarda mail
   - recuerda si ya se suscribi√≥
========================================================== */
const SkylineNewsletter = {
  key: "skyline_newsletter_email",
  init(){
    const msg = document.getElementById("newsletter-msg");
    if(!msg) return;
    try{
      const saved = localStorage.getItem(this.key);
      if(saved && saved.includes("@")){
        msg.textContent = `Ya est√°s suscripto ‚úÖ (${saved})`;
      }
    }catch(e){}
  },
  save(e){
    e.preventDefault();
    const form = e.target;
    const msg = document.getElementById("newsletter-msg");
    const email = (new FormData(form).get("email") || "").toString().trim();

    const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    if(!ok){
      msg.textContent = "Pon√© un email v√°lido üôÇ";
      return false;
    }

    try{
      localStorage.setItem(this.key, email);
      msg.textContent = "Listo ‚úÖ Te avisamos cuando haya novedades.";
      form.reset();
    }catch(err){
      msg.textContent = "No pude guardar el email en este navegador. Prob√° de nuevo.";
    }
    return false;
  }
};
document.addEventListener("DOMContentLoaded", () => SkylineNewsletter.init());
</script>

{% endblock %}
