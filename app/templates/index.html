{# templates/index.html ‚Äî SKYLINE STORE ¬∑ INDEX ULTRA PREMIUM (LIGHT ¬∑ NO ERRORS) #}
{% extends "base.html" %}
{% block title %}Skyline Store ¬∑ Moda urbana premium{% endblock %}

{% block extra_head %}
<style>
/* ==========================================================
   SKYLINE STORE ‚Äî INDEX ULTRA PREMIUM (LIGHT)
   - Fondo m√°s visible + definido (sin ‚Äúneblina‚Äù)
   - Panel categor√≠as NO tapa el dise√±o (se baja y se vuelve m√°s transparente)
   - Animaciones premium (reveal, hover, shimmer, parallax suave)
   - Accesible + motion-safe
========================================================== */

/* ---------- TOKENS ---------- */
:root{
  --bg0:#f6f7fb;
  --bg1:#ffffff;

  --ink:#0b1220;
  --muted: rgba(11,18,32,.68);
  --muted2: rgba(11,18,32,.52);

  --a:#2563eb;  /* blue */
  --b:#06b6d4;  /* cyan */
  --c:#f59e0b;  /* amber */
  --d:#22c55e;  /* green */
  --p:#a855f7;  /* purple */

  --glass: rgba(255,255,255,.72);
  --glass2: rgba(255,255,255,.90);

  --shadow1: 0 14px 30px rgba(2,6,23,.10);
  --shadow2: 0 28px 90px rgba(2,6,23,.14);

  --r2: 1.45rem;
  --r3: 2.05rem;

  --ring: 0 0 0 4px rgba(37,99,235,.18);
  --grid: 1220px;

  --ease: cubic-bezier(.2,.9,.2,1);
}

/* ---------- BASE ---------- */
*{ box-sizing:border-box; }
html{ scroll-behavior:smooth; }
body{
  background: radial-gradient(circle at 0% 0%, rgba(37,99,235,.07), transparent 42%),
              radial-gradient(circle at 100% 0%, rgba(6,182,212,.06), transparent 40%),
              radial-gradient(circle at 50% 100%, rgba(245,158,11,.06), transparent 45%),
              linear-gradient(180deg, var(--bg1), var(--bg0));
  color: var(--ink);
}

.container{
  width:100%;
  max-width: var(--grid);
  margin:0 auto;
  padding: 0 1.1rem;
}
.section{ padding: clamp(3.1rem, 6vw, 5rem) 0; }
.sep{
  height:1px;
  background: linear-gradient(90deg, transparent, rgba(15,23,42,.10), transparent);
  margin: clamp(2.2rem, 4vw, 3rem) 0;
}

/* ---------- TYPO ---------- */
.badge{
  display:inline-flex;
  align-items:center;
  gap:.55rem;
  width: fit-content;
  padding:.44rem .9rem;
  border-radius:999px;
  border: 1px solid rgba(37,99,235,.20);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.70));
  box-shadow: 0 12px 20px rgba(2,6,23,.06);
  font-weight:950;
  font-size:.82rem;
  color: rgba(37,99,235,.96);
}
.badge::before{
  content:"";
  width:10px;height:10px;border-radius:999px;
  background: radial-gradient(circle at 30% 30%, #60a5fa, #2563eb);
  box-shadow: 0 0 0 5px rgba(37,99,235,.12);
}
.h2{
  font-size: clamp(1.62rem, 2.75vw, 2.2rem);
  line-height:1.12;
  font-weight: 985;
  letter-spacing: -.65px;
  margin:.85rem 0 0;
}
.p{
  margin:.75rem 0 0;
  color: var(--muted);
  line-height:1.75;
  font-size: 1.03rem;
}

/* ---------- BUTTONS ---------- */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.55rem;
  border-radius:999px;
  padding:.92rem 2.25rem;
  font-weight: 980;
  border:1px solid transparent;
  text-decoration:none;
  transition: transform .22s var(--ease), box-shadow .22s var(--ease), filter .22s var(--ease), border-color .22s var(--ease);
  user-select:none;
  position:relative;
  will-change: transform;
}
.btn:hover{ transform: translateY(-3px); filter:saturate(1.08); }
.btn:active{ transform: translateY(-1px) scale(.99); }
.btn:focus-visible{ outline:none; box-shadow: var(--ring), var(--shadow1); }

.btn-primary{
  color:#fff;
  background: linear-gradient(135deg, var(--a), var(--b));
  box-shadow: var(--shadow2);
  overflow:hidden;
}
.btn-primary::after{
  content:"";
  position:absolute; inset:-2px;
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,.38) 45%, transparent 70%);
  transform: translateX(-70%);
  opacity:0;
}
.btn-secondary{
  color: var(--ink);
  background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(255,255,255,.72));
  border-color: rgba(15,23,42,.12);
  box-shadow: var(--shadow1);
}
.btn-secondary:hover{ border-color: rgba(37,99,235,.26); }

.btn-mini{ padding:.76rem 1.15rem; font-size:.92rem; }
.btn-ghost{
  background: rgba(255,255,255,.72);
  border:1px solid rgba(15,23,42,.12);
  color: var(--ink);
  box-shadow: 0 10px 18px rgba(2,6,23,.06);
}
.btn-ghost:hover{ border-color: rgba(37,99,235,.22); }

@media (prefers-reduced-motion: no-preference){
  .btn-primary:hover::after{ opacity:.9; animation: shine 1s var(--ease) forwards; }
  @keyframes shine{ to{ transform: translateX(75%); opacity:0; } }
}

/* ==========================================================
   HERO ‚Äî fondo definido + overlays localizados (NO neblina)
   Idea clave:
   - El overlay blanco NO cubre todo, solo la zona de texto.
   - El panel se baja y se vuelve m√°s transl√∫cido en desktop.
========================================================== */
.hero{
  position:relative;
  min-height: min(100vh, 980px);
  display:flex;
  align-items:center;
  overflow:hidden;

  /* Fondo: menos blanco arriba y SIN blur general */
  background:
    radial-gradient(1200px 760px at 14% 8%, rgba(37,99,235,.13), transparent 58%),
    radial-gradient(1000px 700px at 92% 14%, rgba(245,158,11,.12), transparent 62%),
    radial-gradient(1100px 760px at 52% 95%, rgba(34,197,94,.10), transparent 60%),
    /* capa sutil para que el fondo no ‚Äúqueme‚Äù */
    linear-gradient(180deg, rgba(255,255,255,.50) 0%, rgba(246,247,251,.62) 100%),
    url("{{ url_for('static', filename='img/hero/fondo.png') }}");
  background-size: cover;
  /* üî• ajust√° para que se vean bien los objetos del fondo */
  background-position: 68% 52%;
  background-repeat: no-repeat;
  color: var(--ink);
}

/* grano ultra sutil (calidad) */
.hero::after{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:.045;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='240' height='240' filter='url(%23n)' opacity='.8'/%3E%3C/svg%3E");
  mix-blend-mode:multiply;
  z-index:0;
}

/* blobs animados suaves (no tapan el fondo) */
.hero-bg{
  position:absolute;
  inset:-12%;
  z-index:0;
  filter: blur(46px) saturate(1.18);
  opacity:.65;
  pointer-events:none;
}
.hero-bg .blob{ position:absolute; border-radius:999px; transform: translateZ(0); will-change: transform; }
.hero-bg .b1{ width:560px;height:560px; left:-120px; top:-90px;
  background: radial-gradient(circle at 30% 30%, rgba(37,99,235,.38), transparent 62%); }
.hero-bg .b2{ width:560px;height:560px; right:-160px; top:-110px;
  background: radial-gradient(circle at 45% 35%, rgba(245,158,11,.28), transparent 62%); }
.hero-bg .b3{ width:620px;height:620px; left:28%; bottom:-320px;
  background: radial-gradient(circle at 40% 40%, rgba(34,197,94,.22), transparent 66%); }

@media (prefers-reduced-motion: no-preference){
  .hero-bg .b1{ animation: float1 12s ease-in-out infinite; }
  .hero-bg .b2{ animation: float2 14s ease-in-out infinite; }
  .hero-bg .b3{ animation: float3 16s ease-in-out infinite; }
  @keyframes float1{ 0%,100%{transform:translate(0,0)} 50%{transform:translate(18px,12px)} }
  @keyframes float2{ 0%,100%{transform:translate(0,0)} 50%{transform:translate(-20px,14px)} }
  @keyframes float3{ 0%,100%{transform:translate(0,0)} 50%{transform:translate(14px,-18px)} }
}

.hero-inner{ position:relative; z-index:2; width:100%; padding: clamp(5.2rem, 10vh, 7.4rem) 0 4.2rem; }

.hero-grid{
  display:grid;
  grid-template-columns: 1fr;
  gap: clamp(1.7rem, 4vw, 3rem);
  align-items:center;
}
@media (min-width: 980px){
  .hero-grid{ grid-template-columns: 1.08fr .92fr; }
}

/* Overlay SOLO bajo el texto (para que el fondo se vea definido) */
.hero-left{
  position:relative;
}
.hero-left::before{
  content:"";
  position:absolute;
  inset:-1.2rem -1.1rem;
  border-radius: 2rem;
  background: radial-gradient(900px 460px at 24% 30%, rgba(255,255,255,.86), rgba(255,255,255,.46) 62%, rgba(255,255,255,.18) 82%, transparent 100%);
  filter: blur(0px);
  z-index:-1;
}

.hero-title{
  font-size: clamp(2.4rem, 5vw, 3.75rem);
  line-height:1.02;
  font-weight: 990;
  letter-spacing:-.95px;
  margin:.75rem 0 0;
}
.hero-title .grad{
  background: linear-gradient(135deg,
    rgba(11,18,32,1) 0%,
    rgba(11,18,32,1) 36%,
    rgba(37,99,235,.98) 70%,
    rgba(6,182,212,.98) 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color: transparent;
}
.hero-sub{
  margin: .9rem 0 0;
  max-width: 52rem;
  color: rgba(11,18,32,.70);
  font-size: 1.07rem;
  line-height:1.75;
}

/* glass spotlight card (m√°s premium, pero SIN opacar fondo) */
.hero-card{
  display:inline-block;
  margin-top: .95rem;
  padding: .95rem 1.05rem;
  border-radius: 1.35rem;
  background: linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.56));
  border: 1px solid rgba(15,23,42,.10);
  box-shadow: 0 24px 70px rgba(2,6,23,.12);
  backdrop-filter: blur(14px);
}
.hero-cta{ display:flex; flex-wrap:wrap; gap:.75rem; margin-top:1.1rem; }
.hero-chips{ display:flex; flex-wrap:wrap; gap:.55rem; margin-top:1rem; }

.chip{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.46rem .86rem; border-radius:999px;
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.68);
  backdrop-filter: blur(12px);
  box-shadow: 0 12px 22px rgba(2,6,23,.06);
  font-size:.78rem; color: rgba(11,18,32,.74);
  transition: transform .18s var(--ease), box-shadow .18s var(--ease);
}
.chip:hover{ transform: translateY(-2px); box-shadow: var(--shadow1); }
.chip::before{ content:"‚úì"; font-weight: 990; color: rgba(34,197,94,.95); }

/* ---------- RIGHT PANEL (no tapa el dise√±o) ---------- */
.panel{
  position:relative;
  border-radius: var(--r3);
  background: linear-gradient(180deg, rgba(255,255,255,.72), rgba(255,255,255,.52));
  border: 1px solid rgba(15,23,42,.10);
  box-shadow: var(--shadow2);
  padding: 1.05rem;
  overflow:hidden;
  backdrop-filter: blur(16px);
  transform: translateY(10px);
}
@media (min-width:980px){
  /* üëá baja el panel para no cubrir el ‚Äúcentro‚Äù del fondo */
  .panel{ transform: translateY(70px); }
}
.panel::before{
  content:"";
  position:absolute; inset:-2px;
  background: linear-gradient(135deg,
    rgba(37,99,235,.18),
    rgba(6,182,212,.16),
    rgba(245,158,11,.14),
    rgba(168,85,247,.12));
  opacity:.52;
  filter: blur(18px);
  z-index:0;
}
.panel::after{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(700px 320px at 20% 20%, rgba(255,255,255,.55), transparent 60%);
  opacity:.55;
  z-index:0;
}
.panel-inner{ position:relative; z-index:1; }
.panel-head{ display:flex; align-items:flex-end; justify-content:space-between; gap:1rem; margin-bottom:.7rem; }
.panel-title{ font-weight: 990; letter-spacing:-.2px; font-size: .98rem; }
.panel-hint{ color: rgba(11,18,32,.55); font-weight:950; font-size:.82rem; }

/* scroller */
.scroller{
  display:flex; gap:.9rem;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  padding-bottom:.35rem;
  -webkit-overflow-scrolling: touch;
}
.scroller::-webkit-scrollbar{ height: 10px; }
.scroller::-webkit-scrollbar-thumb{ background: rgba(15,23,42,.16); border-radius: 999px; }
.scroller::-webkit-scrollbar-track{ background: transparent; }

/* card categor√≠a */
.cat{
  position:relative;
  flex:0 0 56%;
  max-width: 280px;
  scroll-snap-align:start;
  border-radius: 1.25rem;
  border:1px solid rgba(15,23,42,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.68));
  box-shadow: var(--shadow1);
  padding:.78rem;
  text-decoration:none;
  color: inherit;
  transition: transform .25s var(--ease), box-shadow .25s var(--ease), border-color .25s var(--ease);
  overflow:hidden;
  transform: translateZ(0);
}
.cat::after{
  content:"";
  position:absolute; inset:-45% -70%;
  background:
    radial-gradient(circle at 30% 30%, rgba(37,99,235,.16), transparent 60%),
    radial-gradient(circle at 70% 60%, rgba(245,158,11,.11), transparent 62%),
    radial-gradient(circle at 55% 40%, rgba(168,85,247,.09), transparent 65%);
  opacity:.75;
  transform: rotate(12deg);
  pointer-events:none;
}
.cat:hover{ transform: translateY(-8px); box-shadow: var(--shadow2); border-color: rgba(37,99,235,.20); }

.cat-media{
  position:relative;
  width:100%;
  height: 8.4rem;
  border-radius: 1.05rem;
  overflow:hidden;
  border:1px solid rgba(15,23,42,.10);
  box-shadow: 0 12px 20px rgba(2,6,23,.08);
  background: rgba(255,255,255,.85);
  margin-bottom:.65rem;
}
.cat-media img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
  transform: scale(1.01);
  transition: transform .35s var(--ease), filter .35s var(--ease);
}
.cat:hover .cat-media img{ transform: scale(1.06); filter: saturate(1.06) contrast(1.02); }

/* skeleton + fallback */
.skeleton{
  position:absolute; inset:0;
  border-radius: 1.05rem;
  background:
    linear-gradient(90deg, rgba(226,232,240,.55) 0%, rgba(226,232,240,.25) 45%, rgba(226,232,240,.55) 100%);
  background-size: 200% 100%;
  animation: sk 1.2s ease-in-out infinite;
}
@keyframes sk{ 0%{background-position:0% 0} 100%{background-position:200% 0} }

.fallback{
  display:none;
  width:100%;
  height: 8.4rem;
  border-radius: 1.05rem;
  border:1px dashed rgba(15,23,42,.22);
  background: rgba(255,255,255,.70);
  place-items:center;
  text-align:center;
  padding:.85rem;
  color: rgba(11,18,32,.74);
}

.cat-title{ font-weight: 990; font-size: .98rem; letter-spacing:-.2px; position:relative; z-index:1; }
.cat-sub{ font-size: .82rem; color: rgba(11,18,32,.66); margin-top:.14rem; position:relative; z-index:1; }

/* ==========================================================
   FEATURED
========================================================== */
.grid3{ display:grid; grid-template-columns:1fr; gap:1rem; margin-top:1.25rem; }
@media (min-width: 860px){ .grid3{ grid-template-columns: repeat(3, 1fr); } }

.product{
  border-radius: var(--r2);
  border:1px solid rgba(15,23,42,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(255,255,255,.74));
  box-shadow: var(--shadow1);
  overflow:hidden;
  transition: transform .25s var(--ease), box-shadow .25s var(--ease), border-color .25s var(--ease);
  transform: translateZ(0);
}
.product:hover{ transform: translateY(-8px); box-shadow: var(--shadow2); border-color: rgba(37,99,235,.18); }

.product-media{ position:relative; background:#fff; height:200px; display:block; overflow:hidden; }
.product-media img{ width:100%; height:100%; object-fit:cover; display:block; transform: scale(1.01); transition: transform .5s var(--ease), filter .5s var(--ease); }
.product:hover .product-media img{ transform: scale(1.07); filter: saturate(1.05) contrast(1.02); }

.product-media .media-skeleton{
  position:absolute; inset:0;
  background: linear-gradient(90deg, rgba(226,232,240,.55) 0%, rgba(226,232,240,.25) 45%, rgba(226,232,240,.55) 100%);
  background-size: 200% 100%;
  animation: sk 1.2s ease-in-out infinite;
}
.product-media .fallback{ display:none; position:absolute; inset:0; place-items:center; }

.product-body{ padding: 1.05rem 1.05rem 1.1rem; }
.product-top{ display:flex; align-items:center; justify-content:space-between; gap:.8rem; }

.tag{
  display:inline-flex; align-items:center; gap:.45rem;
  padding:.32rem .65rem;
  border-radius:999px;
  font-weight:980;
  font-size:.75rem;
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.86);
}
.tag.hot{ border-color: rgba(245,158,11,.25); }
.tag.new{ border-color: rgba(37,99,235,.22); }
.tag.best{ border-color: rgba(34,197,94,.22); }

.price{ font-weight: 990; letter-spacing:-.2px; }
.product-title{ margin:.65rem 0 .3rem; font-weight: 990; letter-spacing:-.35px; }
.product-desc{ margin:0; color: var(--muted); line-height:1.65; font-size:.96rem; }

.product-actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.9rem; }

/* icon button premium */
.icon-btn{
  display:inline-flex;
  align-items:center; justify-content:center;
  width: 44px; height: 44px;
  border-radius: 999px;
  border: 1px solid rgba(15,23,42,.12);
  background: rgba(255,255,255,.72);
  box-shadow: 0 12px 18px rgba(2,6,23,.07);
  cursor:pointer;
  transition: transform .22s var(--ease), box-shadow .22s var(--ease), border-color .22s var(--ease);
}
.icon-btn:hover{ transform: translateY(-3px); box-shadow: var(--shadow2); border-color: rgba(37,99,235,.22); }
.icon-btn:focus-visible{ outline:none; box-shadow: var(--ring); }
.icon-btn[data-on="true"]{ border-color: rgba(245,158,11,.30); }

/* ==========================================================
   BENEFITS / REVIEWS / CTA
========================================================== */
.benefits{ margin-top:1.25rem; display:grid; grid-template-columns:1fr; gap:.95rem; }
@media (min-width:900px){ .benefits{ grid-template-columns: repeat(4, 1fr); } }
.benefit{
  border-radius: var(--r2);
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.74);
  backdrop-filter: blur(14px);
  box-shadow: var(--shadow1);
  padding: 1rem 1rem 1.1rem;
  transition: transform .22s var(--ease), box-shadow .22s var(--ease);
}
.benefit:hover{ transform: translateY(-6px); box-shadow: var(--shadow2); }
.benefit .ico{
  width:44px;height:44px;border-radius:16px;
  display:grid; place-items:center;
  background: linear-gradient(135deg, rgba(37,99,235,.18), rgba(6,182,212,.14));
  border:1px solid rgba(37,99,235,.14);
  margin-bottom:.55rem;
  font-weight: 990;
}
.benefit h3{ margin:.15rem 0 .25rem; font-size: .99rem; font-weight: 990; letter-spacing:-.2px; }
.benefit p{ margin:0; color: var(--muted); line-height:1.65; font-size:.95rem; }

.reviews{ margin-top:1.25rem; display:grid; grid-template-columns:1fr; gap:1rem; }
@media (min-width:900px){ .reviews{ grid-template-columns: repeat(3, 1fr); } }
.review{
  border-radius: var(--r2);
  border:1px solid rgba(15,23,42,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));
  box-shadow: var(--shadow1);
  padding: 1.05rem 1.05rem 1rem;
  position:relative;
  overflow:hidden;
  transition: transform .22s var(--ease), box-shadow .22s var(--ease);
}
.review:hover{ transform: translateY(-6px); box-shadow: var(--shadow2); }
.review::before{
  content:"";
  position:absolute; inset:-30% -40%;
  background:
    radial-gradient(circle at 30% 30%, rgba(37,99,235,.14), transparent 62%),
    radial-gradient(circle at 80% 40%, rgba(245,158,11,.10), transparent 62%);
  opacity:.7;
  transform: rotate(8deg);
}
.review .inner{ position:relative; z-index:1; }
.stars{ letter-spacing:1px; font-weight: 990; }
.review p{ margin:.55rem 0 .85rem; color: var(--muted); line-height:1.75; }
.person{ display:flex; align-items:center; gap:.7rem; }
.avatar{
  width:44px;height:44px;border-radius:16px;
  background: linear-gradient(135deg, rgba(168,85,247,.18), rgba(6,182,212,.14));
  border:1px solid rgba(15,23,42,.10);
}
.person b{ display:block; font-weight: 990; }
.person span{ display:block; color: var(--muted2); font-size:.88rem; }

.cta-band{
  border-radius: var(--r3);
  border:1px solid rgba(15,23,42,.10);
  background: linear-gradient(135deg,
    rgba(37,99,235,.16),
    rgba(6,182,212,.14),
    rgba(245,158,11,.12),
    rgba(34,197,94,.12));
  box-shadow: var(--shadow2);
  padding: 1.25rem;
  overflow:hidden;
  position:relative;
}
.cta-band::after{
  content:"";
  position:absolute; inset:-30%;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.52), transparent 60%);
  filter: blur(20px);
  opacity:.65;
}
.cta-band .row{
  position:relative;
  z-index:1;
  display:flex;
  flex-direction:column;
  gap:.9rem;
}
@media (min-width:900px){
  .cta-band .row{ flex-direction:row; align-items:center; justify-content:space-between; gap:1.2rem; }
}
.cta-band h3{ margin:0; font-size: 1.28rem; font-weight: 990; letter-spacing:-.45px; }
.cta-band p{ margin:.25rem 0 0; color: rgba(11,18,32,.72); }

.form{ display:flex; flex-wrap:wrap; gap:.6rem; margin-top:.35rem; }
.input{
  min-width:240px;
  flex:1;
  padding:.9rem 1rem;
  border-radius:999px;
  border:1px solid rgba(15,23,42,.14);
  background: rgba(255,255,255,.88);
  box-shadow: 0 12px 18px rgba(2,6,23,.06);
}
.input:focus-visible{ outline:none; box-shadow: var(--ring); }
.helper{ margin:.55rem 0 0; color: var(--muted2); font-size:.92rem; }

.quick{ display:grid; grid-template-columns:1fr; gap:1rem; margin-top:1.25rem; }
@media (min-width:900px){ .quick{ grid-template-columns: 1.15fr .85fr; align-items:start; } }
.box{
  border-radius: var(--r2);
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.74);
  backdrop-filter: blur(14px);
  box-shadow: var(--shadow1);
  padding: 1rem;
  transition: transform .22s var(--ease), box-shadow .22s var(--ease);
}
.box:hover{ transform: translateY(-6px); box-shadow: var(--shadow2); }
.links{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:.55rem 1rem;
  margin-top:.9rem;
}
.links a{
  color: rgba(11,18,32,.86);
  text-decoration:none;
  font-weight:980;
  font-size:.95rem;
}
.links a:hover{ text-decoration: underline; }

/* ==========================================================
   REVEAL ANIMATIONS (IntersectionObserver)
========================================================== */
.reveal{
  opacity:0;
  transform: translateY(18px);
  transition: opacity .7s var(--ease), transform .7s var(--ease);
  will-change: opacity, transform;
}
.reveal.is-in{
  opacity:1;
  transform: translateY(0);
}
.reveal[data-delay="1"]{ transition-delay: .06s; }
.reveal[data-delay="2"]{ transition-delay: .12s; }
.reveal[data-delay="3"]{ transition-delay: .18s; }
.reveal[data-delay="4"]{ transition-delay: .24s; }

/* motion-safe */
@media (prefers-reduced-motion: reduce){
  *{ animation:none!important; transition:none!important; scroll-behavior:auto!important; }
  .reveal{ opacity:1!important; transform:none!important; }
  .panel{ transform:none!important; }
}
</style>
{% endblock %}

{% block content %}
{% set URL_SHOP = '/shop' %}
{% set URL_PROFILE = '/profile' %}

<section class="hero" aria-label="Hero Skyline Store">
  <div class="hero-bg" aria-hidden="true">
    <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div>
  </div>

  <div class="hero-inner">
    <div class="container">
      <div class="hero-grid">

        <!-- LEFT -->
        <header class="hero-left reveal">
          <div class="badge">Skyline Store ¬∑ Online</div>

          <h1 class="hero-title">
            <span class="grad">Skyline Store</span><br>
            Moda urbana & accesorios premium
          </h1>

          <div class="hero-card">
            <p class="hero-sub" style="margin:0;">
              Productos atentamente seleccionados: prendas urbanas, accesorios novedosos y mucho m√°s.
              Calidad, estilo y una experiencia simple para comprar.
            </p>

            <div class="hero-cta">
              <a href="{{ URL_SHOP }}" class="btn btn-primary" aria-label="Ir a la tienda">Ver tienda ‚Üí</a>
              <a href="#categorias" class="btn btn-secondary" aria-label="Explorar categor√≠as">Explorar categor√≠as</a>
            </div>

            <div class="hero-chips" aria-label="Confianza y beneficios">
              <span class="chip">Pagos seguros</span>
              <span class="chip">Selecci√≥n verificada</span>
              <span class="chip">Env√≠os r√°pidos</span>
              <span class="chip">Atenci√≥n real</span>
            </div>
          </div>
        </header>

        <!-- RIGHT -->
        <aside id="categorias" class="panel reveal" data-delay="2" aria-label="Categor√≠as destacadas">
          <div class="panel-inner">
            <div class="panel-head">
              <div class="panel-title">Categor√≠as destacadas</div>
              <div class="panel-hint">desliz√° ‚Üí</div>
            </div>

            {% set cats = [
              {"slug":"buzos","img":"card_buzos.png","price":"Desde $1.490"},
              {"slug":"remeras","img":"card_remeras.png","price":"Desde $1.480"},
              {"slug":"gorros","img":"card_gorras.png","price":"Desde $1.490"},
              {"slug":"accesorios","img":"card_accesorios.png","price":"Para todos"}
            ] %}

            <div class="scroller">
              {% for c in cats %}
              <a href="{{ URL_SHOP }}?categoria={{ c.slug }}" class="cat">
                <div class="cat-media">
                  <div class="skeleton" aria-hidden="true"></div>
                  <img
                    src="{{ url_for('static', filename='img/hero/' ~ c.img) }}"
                    alt="{{ c.slug|capitalize }}"
                    loading="lazy"
                    decoding="async"
                    data-fallback-title="{{ c.slug|capitalize }}"
                  >
                  <div class="fallback" aria-hidden="true">
                    <div style="font-weight:990;line-height:1.15;">{{ c.slug|capitalize }}</div>
                    <div style="opacity:.78;font-size:.86rem;margin-top:.15rem;">{{ c.price }}</div>
                  </div>
                </div>

                <div class="cat-title">{{ c.slug|capitalize }}</div>
                <div class="cat-sub">{{ c.price }}</div>
              </a>
              {% endfor %}
            </div>
          </div>
        </aside>

      </div>
    </div>
  </div>
</section>

<!-- DESTACADOS -->
<section class="section" id="destacados" aria-label="Productos destacados">
  <div class="container">
    <div class="badge reveal">Selecci√≥n curada</div>
    <h2 class="h2 reveal" data-delay="1">Destacados del momento</h2>
    <p class="p reveal" data-delay="2">Lo m√°s buscado y lo nuevo. Entr√°, eleg√≠ y compr√° sin vueltas.</p>

    {% set featured = [
      {"id":"hoodie","tag":"Nuevo","tag_cls":"new","title":"Hoodie Skyline Essential","desc":"Calce premium + estilo limpio, ideal para todos los d√≠as.","price":"$1.990","img":"featured_hoodie.jpg","href": URL_SHOP ~ "?categoria=buzos"},
      {"id":"remera","tag":"Hot","tag_cls":"hot","title":"Remera Skyline Street","desc":"Liviana, urbana y combinable. La base de cualquier outfit.","price":"$1.480","img":"featured_remera.jpg","href": URL_SHOP ~ "?categoria=remeras"},
      {"id":"gorra","tag":"Top","tag_cls":"best","title":"Gorra Skyline Classic","desc":"Minimal, pro y con actitud. Cierra el look.","price":"$1.490","img":"featured_gorra.jpg","href": URL_SHOP ~ "?categoria=gorros"}
    ] %}

    <div class="grid3">
      {% for p in featured %}
      <article class="product reveal" data-delay="{{ loop.index }}">
        <div class="product-media">
          <div class="media-skeleton" aria-hidden="true"></div>
          <img
            src="{{ url_for('static', filename='img/hero/' ~ p.img) }}"
            alt="{{ p.title }}"
            loading="lazy"
            decoding="async"
            data-fallback-title="{{ p.title }}"
          >
          <div class="fallback" aria-hidden="true">
            <div style="font-weight:990;line-height:1.2;padding:1.1rem;text-align:center;">
              {{ p.title }}<br>
              <span style="opacity:.78;font-weight:800;font-size:.92rem;">Imagen faltante</span>
            </div>
          </div>
        </div>

        <div class="product-body">
          <div class="product-top">
            <span class="tag {{ p.tag_cls }}">{{ p.tag }}</span>
            <span class="price">{{ p.price }}</span>
          </div>

          <div class="product-title">{{ p.title }}</div>
          <p class="product-desc">{{ p.desc }}</p>

          <div class="product-actions">
            <a class="btn btn-primary btn-mini" href="{{ p.href }}">Ver en tienda</a>
            <a class="btn btn-ghost btn-mini" href="#newsletter">Recibir novedades</a>

            <button class="icon-btn" type="button" aria-label="Guardar en favoritos" data-fav="{{ p.id }}">
              ‚≠ê
            </button>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>

    <div class="sep" role="presentation"></div>
  </div>
</section>

<!-- BENEFICIOS -->
<section class="section" id="beneficios" aria-label="Beneficios Skyline Store">
  <div class="container">
    <div class="badge reveal">Experiencia premium</div>
    <h2 class="h2 reveal" data-delay="1">Comprar ac√° se siente mejor</h2>
    <p class="p reveal" data-delay="2">Detalles que suman: confianza, rapidez y selecci√≥n real.</p>

    <div class="benefits">
      <div class="benefit reveal" data-delay="1"><div class="ico">üîí</div><h3>Pagos seguros</h3><p>Checkout confiable y procesos claros.</p></div>
      <div class="benefit reveal" data-delay="2"><div class="ico">‚úÖ</div><h3>Selecci√≥n real</h3><p>Productos elegidos con criterio y calidad.</p></div>
      <div class="benefit reveal" data-delay="3"><div class="ico">üöö</div><h3>Env√≠os r√°pidos</h3><p>Opciones √°giles y seguimiento cuando aplica.</p></div>
      <div class="benefit reveal" data-delay="4"><div class="ico">üí¨</div><h3>Atenci√≥n humana</h3><p>Te respondemos de verdad. Sin bots raros.</p></div>
    </div>

    <div class="sep" role="presentation"></div>
  </div>
</section>

<!-- REVIEWS -->
<section class="section" id="reviews" aria-label="Opiniones de clientes">
  <div class="container">
    <div class="badge reveal">Social proof</div>
    <h2 class="h2 reveal" data-delay="1">Lo que dicen cuando compran</h2>
    <p class="p reveal" data-delay="2">Confianza construida en experiencia y est√©tica.</p>

    <div class="reviews">
      <div class="review reveal" data-delay="1"><div class="inner"><div class="stars" aria-label="5 estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div><p>‚ÄúLleg√≥ r√°pido y el dise√±o se ve premium. La web es re c√≥moda.‚Äù</p><div class="person"><div class="avatar" aria-hidden="true"></div><div><b>Agus</b><span>Montevideo</span></div></div></div></div>
      <div class="review reveal" data-delay="2"><div class="inner"><div class="stars" aria-label="5 estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div><p>‚ÄúMe encant√≥ la selecci√≥n, no es el t√≠pico cat√°logo sin sentido.‚Äù</p><div class="person"><div class="avatar" aria-hidden="true"></div><div><b>Martina</b><span>Canelones</span></div></div></div></div>
      <div class="review reveal" data-delay="3"><div class="inner"><div class="stars" aria-label="5 estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div><p>‚ÄúLa est√©tica es otra cosa. Se nota que est√° pensado para vender.‚Äù</p><div class="person"><div class="avatar" aria-hidden="true"></div><div><b>Facu</b><span>Maldonado</span></div></div></div></div>
    </div>

    <div class="sep" role="presentation"></div>
  </div>
</section>

<!-- NEWSLETTER -->
<section class="section" id="newsletter" aria-label="Newsletter y novedades">
  <div class="container">
    <div class="cta-band reveal">
      <div class="row">
        <div>
          <h3>Recib√≠ novedades, ofertas y lanzamientos</h3>
          <p>1 mail por semana. Sin spam. Te avisamos cuando sale lo bueno.</p>
        </div>

        <form class="form" onsubmit="return Skyline.Newsletter.save(event)">
          <input class="input" type="email" name="email" required placeholder="Tu email (ej: gaby@gmail.com)" aria-label="Email">
          <button class="btn btn-primary" type="submit">Suscribirme</button>
        </form>
      </div>
      <p class="helper" id="newsletter-msg" role="status" aria-live="polite"></p>
    </div>

    <div class="quick">
      <div class="box reveal" data-delay="1">
        <h2 class="h2" style="font-size:1.35rem;margin:0;">Explor√° r√°pido</h2>
        <p class="p" style="margin-top:.55rem;">Entr√° directo a lo que quer√©s, sin perder tiempo.</p>

        <div class="links">
          <a href="{{ URL_SHOP }}?categoria=buzos">Buzos</a>
          <a href="{{ URL_SHOP }}?categoria=remeras">Remeras</a>
          <a href="{{ URL_SHOP }}?categoria=gorros">Gorros</a>
          <a href="{{ URL_SHOP }}?categoria=accesorios">Accesorios</a>
          <a href="{{ URL_SHOP }}">Todo el cat√°logo</a>
          <a href="{{ URL_PROFILE }}">Mi perfil</a>
        </div>
      </div>

      <div class="box reveal" data-delay="2">
        <h2 class="h2" style="font-size:1.35rem;margin:0;">Acci√≥n r√°pida</h2>
        <p class="p" style="margin-top:.55rem;">¬øListo para ver lo nuevo? Dale una vuelta a la tienda.</p>

        <div style="margin-top:.9rem; display:flex; gap:.6rem; flex-wrap:wrap;">
          <a class="btn btn-secondary btn-mini" href="{{ URL_SHOP }}">Ver tienda</a>
          <a class="btn btn-ghost btn-mini" href="#reviews">Ver rese√±as</a>
        </div>

        <p class="helper" style="margin-top:.85rem;">
          Tip: agreg√° WhatsApp / Instagram en el footer global (base.html) para convertir m√°s.
        </p>
      </div>
    </div>
  </div>
</section>

<script>
/* ==========================================================
   SKYLINE (NO GLOBALS RAROS) + NO ERRORS
========================================================== */
window.Skyline = window.Skyline || {};

/* ---------- REVEAL (IntersectionObserver) ---------- */
(function(){
  const items = document.querySelectorAll(".reveal");
  if(!items.length) return;

  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        e.target.classList.add("is-in");
        io.unobserve(e.target);
      }
    });
  }, { root:null, threshold: 0.12 });

  items.forEach(el => io.observe(el));
})();

/* ---------- IMAGES: skeleton + fallback seguro ---------- */
(function(){
  const imgs = document.querySelectorAll("img[data-fallback-title]");
  imgs.forEach(img => {
    const wrap = img.parentElement;
    const sk = wrap ? wrap.querySelector(".skeleton, .media-skeleton") : null;
    const fb = wrap ? wrap.querySelector(".fallback") : null;

    const done = () => { if(sk) sk.style.display = "none"; };
    const fail = () => {
      if(fb) fb.style.display = "grid";
      if(img) img.style.display = "none";
      done();
    };

    img.addEventListener("load", done, { once:true });
    img.addEventListener("error", fail, { once:true });

    // por si ya estaba en cach√©
    if (img.complete && img.naturalWidth > 0) done();
  });
})();

/* ---------- Favoritos (localStorage) ---------- */
(function(){
  const key = "skyline_favs";
  const read = () => { try { return JSON.parse(localStorage.getItem(key) || "[]"); } catch(e){ return []; } };
  const write = (arr) => { try { localStorage.setItem(key, JSON.stringify(arr)); } catch(e){} };

  const favs = new Set(read());
  const btns = document.querySelectorAll("button[data-fav]");

  btns.forEach(btn => {
    const id = btn.getAttribute("data-fav");
    const sync = () => {
      const on = favs.has(id);
      btn.dataset.on = on ? "true" : "false";
      btn.textContent = on ? "üíõ" : "‚≠ê";
      btn.setAttribute("aria-label", on ? "Quitar de favoritos" : "Guardar en favoritos");
    };
    sync();
    btn.addEventListener("click", () => {
      if (favs.has(id)) favs.delete(id);
      else favs.add(id);
      write([...favs]);
      sync();
    });
  });
})();

/* ---------- Newsletter (localStorage) ---------- */
Skyline.Newsletter = {
  key: "skyline_newsletter_email",
  init(){
    const msg = document.getElementById("newsletter-msg");
    if(!msg) return;
    try{
      const saved = localStorage.getItem(this.key);
      if(saved && saved.includes("@")){
        msg.textContent = `Ya est√°s suscripto ‚úÖ (${saved})`;
      }
    }catch(e){}
  },
  save(e){
    e.preventDefault();
    const form = e.target;
    const msg = document.getElementById("newsletter-msg");
    const email = (new FormData(form).get("email") || "").toString().trim();
    const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

    if(!ok){
      if(msg) msg.textContent = "Pon√© un email v√°lido üôÇ";
      return false;
    }
    try{
      localStorage.setItem(this.key, email);
      if(msg) msg.textContent = "Listo ‚úÖ Te avisamos cuando haya novedades.";
      form.reset();
    }catch(err){
      if(msg) msg.textContent = "No pude guardar el email en este navegador. Prob√° de nuevo.";
    }
    return false;
  }
};
document.addEventListener("DOMContentLoaded", () => Skyline.Newsletter.init());

/* ---------- Parallax suave de blobs (NO pesado) ---------- */
(function(){
  const hero = document.querySelector(".hero");
  const b1 = document.querySelector(".hero-bg .b1");
  const b2 = document.querySelector(".hero-bg .b2");
  const b3 = document.querySelector(".hero-bg .b3");
  if(!hero || !b1 || !b2 || !b3) return;

  // motion-safe
  if (window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches) return;

  let raf = null;
  hero.addEventListener("mousemove", (ev)=>{
    const rect = hero.getBoundingClientRect();
    const x = (ev.clientX - rect.left) / rect.width - 0.5; // -0.5..0.5
    const y = (ev.clientY - rect.top) / rect.height - 0.5;

    if(raf) cancelAnimationFrame(raf);
    raf = requestAnimationFrame(()=>{
      b1.style.transform = `translate(${x * 18}px, ${y * 14}px)`;
      b2.style.transform = `translate(${x * -16}px, ${y * 12}px)`;
      b3.style.transform = `translate(${x * 10}px, ${y * -14}px)`;
    });
  }, { passive:true });
})();
</script>
{% endblock %}
