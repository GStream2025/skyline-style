{% extends "base.html" %}
{% block title %}Skyline Store · Moda urbana premium{% endblock %}

{% block extra_head %}
<meta name="description" content="{{ meta_description | default('Skyline Store · Moda urbana premium, accesorios y tecnología.') }}">
<link rel="canonical" href="{{ request.url }}">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">

<link rel="preload" as="image" href="{{ url_for('static', filename='img/banners/hero_home.png') }}">

<style>
/* ==========================================================
   HOME · PRO ENTERPRISE (scoped)
   Solo mejora la home sin romper otras páginas
========================================================== */
.home-pro{padding:18px 0 28px}
.home-pro .sr-only{
  position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;
  overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
}
.hp-top{
  display:flex;align-items:flex-start;justify-content:space-between;gap:16px;
  margin-bottom:18px;
}
.hp-badges{display:flex;gap:10px;flex-wrap:wrap}
.hp-badge{
  display:inline-flex;align-items:center;gap:10px;
  padding:8px 12px;border-radius:999px;
  background:rgba(255,255,255,.82);
  border:1px solid rgba(11,18,32,.10);
  box-shadow:0 10px 22px rgba(11,18,32,.06);
  font-weight:900;letter-spacing:.10em;text-transform:uppercase;font-size:.72rem;
  color:rgba(11,18,32,.74);
}
.hp-dot{width:9px;height:9px;border-radius:999px;background:linear-gradient(135deg,var(--primary),var(--primary-2))}
.hp-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.hp-action{
  display:inline-flex;align-items:center;gap:10px;
  padding:10px 12px;border-radius:14px;
  background:rgba(255,255,255,.72);
  border:1px solid rgba(11,18,32,.10);
  box-shadow:0 12px 26px rgba(11,18,32,.06);
  font-weight:900;color:rgba(11,18,32,.74);
  transition:transform var(--t), box-shadow var(--t), background var(--t);
}
.hp-action:hover{transform:translateY(-2px);box-shadow:0 18px 44px rgba(11,18,32,.10);background:rgba(255,255,255,.90)}
.hp-action .mini{width:8px;height:8px;border-radius:999px;background:linear-gradient(135deg,var(--accent),var(--primary-2))}

.hp-search{
  display:flex;align-items:center;gap:10px;
  padding:10px 12px;border-radius:16px;
  background:rgba(255,255,255,.82);
  border:1px solid rgba(11,18,32,.10);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.70), 0 16px 38px rgba(11,18,32,.08);
}
.hp-search input{
  border:0;background:transparent;outline:none;
  min-width:320px;padding:0;color:var(--text);font-weight:700;
}
.hp-search input::placeholder{color:rgba(11,18,32,.40)}
.hp-search .btn{white-space:nowrap}
@media(max-width:980px){
  .hp-top{flex-direction:column;align-items:stretch}
  .hp-search input{min-width:160px;width:100%}
}

.hp-heroGrid{
  display:grid;gap:18px;
  grid-template-columns: 320px 1fr 360px;
  align-items:stretch;
}
@media(max-width:1100px){
  .hp-heroGrid{grid-template-columns: 1fr}
}

.hp-side, .hp-panel{
  border-radius:var(--r-xl);
  border:1px solid rgba(11,18,32,.10);
  background:rgba(255,255,255,.70);
  box-shadow:var(--sh-1);
  overflow:hidden;
}
.hp-side .inner, .hp-panel .inner{padding:18px}
.hp-side h3{
  margin:0 0 10px;
  font-size:.78rem;letter-spacing:.14em;text-transform:uppercase;
  color:rgba(11,18,32,.55);font-weight:950;
}
.hp-cats{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}
.hp-cats a{
  display:flex;align-items:center;justify-content:space-between;gap:10px;
  padding:12px 12px;border-radius:16px;
  border:1px solid rgba(11,18,32,.08);
  background:rgba(255,255,255,.82);
  box-shadow:0 12px 26px rgba(11,18,32,.06);
  transition:transform var(--t), box-shadow var(--t), background var(--t);
  font-weight:900;color:rgba(11,18,32,.78);
}
.hp-cats a:hover{transform:translateY(-2px);box-shadow:0 18px 44px rgba(11,18,32,.10);background:rgba(255,255,255,.94)}
.hp-cats .arrow{opacity:.55;font-weight:950}

.hp-hero{
  position:relative;
  border-radius:var(--r-2xl);
  border:1px solid rgba(11,18,32,.10);
  background:rgba(255,255,255,.70);
  box-shadow:var(--sh-2);
  overflow:hidden;
  min-height:420px;
}
.hp-hero::before{
  content:"";
  position:absolute;inset:-40%;
  background:
    radial-gradient(circle at 22% 28%, rgba(45,108,223,.26), transparent 55%),
    radial-gradient(circle at 78% 30%, rgba(255,176,32,.18), transparent 55%),
    radial-gradient(circle at 45% 88%, rgba(59,177,255,.18), transparent 55%);
  filter:blur(30px);
  opacity:.95;
  pointer-events:none;
}
.hp-heroMedia{
  position:absolute;inset:0;
}
.hp-heroMedia img{
  width:100%;height:100%;object-fit:cover;
  transform:scale(1.03);
  filter:saturate(1.03) contrast(1.04);
}
.hp-heroShade{
  position:absolute;inset:0;
  background:
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.55)),
    radial-gradient(900px 520px at 60% 20%, rgba(255,255,255,.28), transparent 60%),
    radial-gradient(900px 520px at 10% 20%, rgba(45,108,223,.18), transparent 55%);
}
.hp-heroInner{
  position:relative;
  padding:22px;
  display:grid;
  gap:14px;
  height:100%;
  align-content:end;
}
.hp-kicker{
  display:inline-flex;align-items:center;gap:10px;
  padding:8px 12px;border-radius:999px;
  background:rgba(255,255,255,.86);
  border:1px solid rgba(11,18,32,.10);
  box-shadow:0 12px 26px rgba(11,18,32,.08);
  font-weight:950;letter-spacing:.14em;text-transform:uppercase;font-size:.72rem;
  color:rgba(11,18,32,.72);
}
.hp-kicker .dot{width:9px;height:9px;border-radius:999px;background:linear-gradient(90deg,var(--success),var(--primary-2))}
.hp-title{
  font-size:clamp(2.1rem, 3.1vw, 3.1rem);
  line-height:1.02;
  letter-spacing:-.04em;
  margin:0;
}
.hp-title .grad{
  background:linear-gradient(135deg,var(--primary),var(--primary-2));
  -webkit-background-clip:text;background-clip:text;color:transparent;
}
.hp-sub{max-width:58ch;font-size:1.02rem;color:rgba(11,18,32,.68);font-weight:650}
.hp-ctas{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
.hp-proof{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
.hp-pill{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 10px;border-radius:999px;
  background:rgba(255,255,255,.78);
  border:1px solid rgba(11,18,32,.10);
  box-shadow:0 10px 22px rgba(11,18,32,.06);
  font-weight:850;font-size:.88rem;color:rgba(11,18,32,.68);
}
.hp-pill .p{width:8px;height:8px;border-radius:999px;background:linear-gradient(135deg,var(--primary),var(--primary-2))}

.hp-panel .title{
  font-weight:950;font-size:1.05rem;margin:0 0 6px;
}
.hp-panel .muted{color:rgba(11,18,32,.65);font-weight:650;margin:0 0 12px}
.hp-panel .ctaRow{display:flex;gap:10px;flex-wrap:wrap}
.hp-panel .secure{
  display:inline-flex;align-items:center;gap:8px;
  padding:7px 10px;border-radius:999px;
  background:rgba(22,163,74,.12);color:rgba(22,163,74,.95);
  border:1px solid rgba(22,163,74,.20);
  font-weight:950;font-size:.78rem;
}

/* Featured */
.hp-head{
  display:flex;align-items:flex-end;justify-content:space-between;gap:14px;
  margin:22px 0 12px;
}
.hp-head .sub{color:rgba(11,18,32,.55);font-weight:750}
.hp-products{margin-top:12px}
.hp-cardP{padding:16px}
.hp-cardP .meta{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-top:12px}
.hp-cardP .name{font-weight:950;line-height:1.18}
.hp-cardP .buy{width:100%}
.to-top{
  position:fixed;right:18px;bottom:18px;
  width:46px;height:46px;border-radius:16px;
  border:1px solid rgba(11,18,32,.10);
  background:rgba(255,255,255,.78);
  box-shadow:0 18px 60px rgba(11,18,32,.14);
  cursor:pointer;
  display:none;
  font-weight:950;
  transition:transform var(--t), box-shadow var(--t), background var(--t);
}
.to-top:hover{transform:translateY(-2px);box-shadow:0 24px 80px rgba(11,18,32,.18);background:#fff}
</style>
{% endblock %}

{% block content %}
<section class="home-pro">

  <!-- TOP BENEFITS + SEARCH -->
  <section class="hp-top">
    <div class="stack" style="gap:12px">
      <div class="hp-badges" aria-label="Beneficios">
        <span class="hp-badge"><span class="hp-dot"></span> Envío rápido</span>
        <span class="hp-badge"><span class="hp-dot"></span> Pago seguro</span>
        <span class="hp-badge"><span class="hp-dot"></span> Soporte 24/7</span>
        <span class="hp-badge"><span class="hp-dot"></span> Compra protegida</span>
      </div>

      <div class="hp-actions" aria-label="Accesos rápidos">
        <a class="hp-action" href="{{ url_for('shop.shop') }}?sort=new"><span class="mini"></span> Novedades</a>
        <a class="hp-action" href="{{ url_for('shop.shop') }}?q=oferta"><span class="mini"></span> Ofertas</a>
        <a class="hp-action" href="{{ url_for('shop.shop') }}"><span class="mini"></span> Ver todo</a>
      </div>
    </div>

    <form class="hp-search" action="{{ url_for('shop.shop') }}" method="get" role="search" aria-label="Buscar productos">
      <label for="q" class="sr-only">Buscar</label>
      <input id="q" name="q" placeholder="Buscar en Skyline Store…" autocomplete="off">
      <button class="btn btn-primary btn-sm" type="submit">Buscar</button>
    </form>
  </section>

  <!-- HERO GRID -->
  <section class="hp-heroGrid">

    <!-- LEFT: Categories -->
    <aside class="hp-side" aria-label="Categorías">
      <div class="inner">
        <h3>Categorías</h3>
        <ul class="hp-cats">
          <li><a href="{{ url_for('shop.shop') }}?categoria=ropa">Ropa urbana <span class="arrow">→</span></a></li>
          <li><a href="{{ url_for('shop.shop') }}?categoria=accesorios">Accesorios <span class="arrow">→</span></a></li>
          <li><a href="{{ url_for('shop.shop') }}?categoria=tecnologia">Tecnología <span class="arrow">→</span></a></li>
          <li><a href="{{ url_for('shop.shop') }}?sort=new">Lo nuevo <span class="arrow">→</span></a></li>
        </ul>
      </div>
    </aside>

    <!-- CENTER: Hero -->
    <div class="hp-hero" aria-label="Hero principal">
      <div class="hp-heroMedia" aria-hidden="true">
        <img
          src="{{ url_for('static', filename='img/banners/hero_home.png') }}"
          alt=""
          loading="eager"
          decoding="async"
        >
      </div>
      <div class="hp-heroShade" aria-hidden="true"></div>

      <div class="hp-heroInner">
        <span class="hp-kicker"><span class="dot"></span> TEMPORADA 2026</span>
        <h1 class="hp-title">Streetwear <span class="grad">premium</span></h1>
        <p class="hp-sub">Moda urbana + tecnología con diseño profesional. Comprá rápido, seguro y con una experiencia tipo marketplace.</p>

        <div class="hp-ctas">
          <a href="{{ url_for('shop.shop') }}" class="btn btn-primary">Explorar tienda</a>
          <a href="{{ url_for('shop.shop') }}?sort=new" class="btn btn-soft">Novedades</a>
          <a href="{{ url_for('shop.shop') }}?q=oferta" class="btn">Ver ofertas</a>
        </div>

        <div class="hp-proof" aria-label="Prueba social">
          <span class="hp-pill"><span class="p"></span> Checkout optimizado</span>
          <span class="hp-pill"><span class="p"></span> Envíos rápidos</span>
          <span class="hp-pill"><span class="p"></span> Soporte real</span>
        </div>
      </div>
    </div>

    <!-- RIGHT: Account panel -->
    <aside class="hp-panel" aria-label="Acceso a cuenta">
      <div class="inner">
        <div class="row between" style="align-items:center">
          <p class="title" style="margin:0">Tu cuenta</p>
          <span class="secure">● Seguro</span>
        </div>
        <p class="muted">Accedé a pedidos, guardá favoritos y recibí promos exclusivas.</p>
        <div class="ctaRow">
          <a class="btn btn-primary" href="/account">Ingresar</a>
          <a class="btn btn-soft" href="/account">Crear cuenta</a>
        </div>
        <div style="margin-top:14px" class="card compact">
          <p class="card-title" style="margin:0 0 6px">Beneficios</p>
          <p class="card-muted" style="margin:0">Seguimiento de pedidos · cupones · drops exclusivos</p>
        </div>
      </div>
    </aside>

  </section>

  <!-- FEATURED -->
  <section class="hp-products">
    <header class="hp-head">
      <div>
        <h2>Destacados</h2>
        <div class="sub">Selección premium curada para vos</div>
      </div>
      <a class="btn btn-ghost" href="{{ url_for('shop.shop') }}">Ver todo →</a>
    </header>

    {% set featured_list = featured if featured is defined else [] %}

    <div class="grid grid-4">
      {% for p in featured_list %}
        <article class="card hp-cardP product-card">
          <div class="product-media">
            <span class="product-chip">Destacado</span>
            <img src="{{ p.img }}" alt="{{ p.title }}" loading="lazy" decoding="async">
          </div>

          <div class="product-meta">
            <div class="stack" style="gap:6px">
              <div class="product-name">{{ p.title }}</div>
              <div class="product-sub">Selección premium</div>
            </div>
            <div class="price">{{ p.price }}</div>
          </div>

          <div class="product-actions">
            <a class="btn btn-primary buy" href="{{ p.href }}">Comprar</a>
            <a class="btn btn-soft" href="{{ p.href }}">Ver detalles</a>
          </div>
        </article>
      {% else %}
        <div class="empty">
          <h3 style="margin:0 0 8px">Todavía no hay productos destacados</h3>
          <p style="margin:0">Cargalos desde Admin → Productos y van a aparecer acá automáticamente.</p>
          <div style="margin-top:12px">
            <a class="btn btn-primary" href="{{ url_for('shop.shop') }}">Ir a la tienda</a>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>

</section>

<button class="to-top" id="toTop" aria-label="Volver arriba">↑</button>

<script>
(() => {
  const btn = document.getElementById("toTop");
  if (!btn) return;

  const onScroll = () => {
    btn.style.display = (window.scrollY > 500) ? "inline-flex" : "none";
  };
  window.addEventListener("scroll", onScroll, { passive: true });
  onScroll();

  btn.addEventListener("click", () => window.scrollTo({ top: 0, behavior: "smooth" }));
})();
</script>
{% endblock %}
