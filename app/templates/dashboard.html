{% extends "base.html" %}

{% block title %}Panel de usuario ¬∑ Skyline Style{% endblock %}

{% block content %}
{% set name = user_name|default('Skyline Guest') %}
{% set status = account_status|default('active') %}
{% set last = last_login|default('hace poco') %}

{% set orders = orders_count|default(0) %}
{% set favs = favorites_count|default(0) %}
{% set points = skyline_points|default(0) %}
{% set next_pts = next_level_points|default(500) %}
{% set pct = ((points / next_pts) * 100) if next_pts else 0 %}
{% if pct > 100 %}{% set pct = 100 %}{% endif %}

<main class="max-w-6xl mx-auto px-4 pt-14 pb-20 space-y-10">

  <!-- HEADER -->
  <header class="relative rounded-3xl border border-slate-800/70 bg-slate-950/70 shadow-card overflow-hidden">
    <div class="absolute inset-0 pointer-events-none">
      <div class="absolute -top-24 -right-24 h-64 w-64 bg-sky-500/10 rounded-full blur-3xl"></div>
      <div class="absolute -bottom-24 -left-24 h-64 w-64 bg-emerald-500/10 rounded-full blur-3xl"></div>
    </div>

    <div class="relative p-6 md:p-8 space-y-6">
      <div class="flex flex-col md:flex-row md:justify-between md:items-end gap-6">

        <div class="space-y-3">
          <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-900/70 border border-slate-700/70 text-[11px] uppercase tracking-[0.22em] text-slate-300">
            <span class="h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
            Panel de cuenta ¬∑ Demo
          </span>

          <h1 class="text-2xl md:text-3xl font-semibold text-slate-50">
            Hola, {{ name }}
          </h1>

          <p class="text-sm text-slate-400 max-w-xl">
            Este es tu panel personal de Skyline Style.  
            Dise√±ado para pedidos, puntos, favoritos y futuras funciones premium.
          </p>

          <div class="flex flex-wrap gap-2 text-xs text-slate-400">
            <span class="px-3 py-1 rounded-full bg-slate-900/60 border border-slate-800">
              √öltimo acceso: <span class="text-slate-200">{{ last }}</span>
            </span>
            <span class="px-3 py-1 rounded-full bg-slate-900/60 border border-slate-800">
              Nivel: <span class="text-amber-300">Standard</span>
            </span>
          </div>
        </div>

        <!-- PUNTOS -->
        <div class="w-full md:w-[320px] rounded-2xl border border-sky-500/40 bg-slate-950/60 px-5 py-4">
          <p class="text-xs text-slate-400">Puntos Skyline</p>
          <p class="text-2xl font-semibold text-slate-50">
            {{ points }} <span class="text-xs text-slate-400">pts</span>
          </p>

          <div class="mt-3">
            <div class="h-2 bg-slate-800 rounded-full overflow-hidden">
              <div class="h-full bg-gradient-to-r from-sky-400 to-emerald-400"
                   style="width: {{ pct|round(0) }}%;"></div>
            </div>
            <p class="mt-2 text-[11px] text-slate-400">
              {{ points }} / {{ next_pts }} pts para el pr√≥ximo nivel
            </p>
          </div>
        </div>

      </div>

      <div class="flex flex-col sm:flex-row gap-2">
        <a href="{{ url_for('main.shop') }}" class="btn-primary-glow text-sm">
          Ir a la tienda ‚Üí
        </a>
        <a href="{{ url_for('main.index') }}#destacados"
           class="rounded-xl border border-slate-800 bg-slate-900/50 px-4 py-2 text-sm text-slate-100 hover:bg-slate-900">
          Ver destacados ‚òÖ
        </a>
      </div>
    </div>
  </header>

  <!-- M√âTRICAS -->
  <section class="grid gap-4 md:grid-cols-4">

    <article class="card-elevated p-4">
      <p class="text-xs text-slate-400 uppercase">Pedidos</p>
      <p class="text-2xl font-semibold text-slate-50">{{ orders }}</p>
      <p class="text-[11px] text-slate-400">Historial de compras y env√≠os</p>
    </article>

    <article class="card-elevated p-4">
      <p class="text-xs text-slate-400 uppercase">Favoritos</p>
      <p class="text-2xl font-semibold text-slate-50">{{ favs }}</p>
      <p class="text-[11px] text-slate-400">Productos guardados</p>
    </article>

    <article class="card-elevated p-4">
      <p class="text-xs text-slate-400 uppercase">Puntos</p>
      <p class="text-2xl font-semibold text-slate-50">{{ points }}</p>
      <p class="text-[11px] text-slate-400">Beneficios acumulados</p>
    </article>

    <article class="card-elevated p-4">
      <p class="text-xs text-slate-400 uppercase">Nivel</p>
      <p class="text-xl font-semibold text-amber-300">Standard</p>
      <p class="text-[11px] text-slate-400">Drops y cupones futuros</p>
    </article>

  </section>

  <!-- ACCIONES -->
  <section class="grid gap-4 md:grid-cols-3">
    <a href="{{ url_for('main.shop') }}" class="card-elevated p-4 hover:-translate-y-1 transition">
      <p class="font-medium text-slate-50">üõí Comprar ahora</p>
      <p class="text-[11px] text-slate-400">Explor√° la colecci√≥n completa</p>
    </a>

    <a href="{{ url_for('main.index') }}#destacados" class="card-elevated p-4 hover:-translate-y-1 transition">
      <p class="font-medium text-slate-50">üî• Destacados</p>
      <p class="text-[11px] text-slate-400">Drops y combos recomendados</p>
    </a>

    <div class="card-elevated p-4 opacity-70">
      <p class="font-medium text-slate-50">‚öô Perfil</p>
      <p class="text-[11px] text-slate-400">Edici√≥n de datos (pr√≥ximamente)</p>
    </div>
  </section>

  <!-- AVISO -->
  <div class="rounded-2xl border border-amber-400/50 bg-amber-500/10 px-4 py-3 text-[11px] text-amber-100">
    ‚ö†Ô∏è Modo demo activo. Este panel est√° listo para conectarse al backend real.
  </div>

  <!-- FOOTER -->
  <footer class="pt-6 border-t border-slate-800 flex flex-col md:flex-row justify-between gap-3">
    <p class="text-xs text-slate-400">
      Skyline Style ¬∑ Panel de usuario profesional
    </p>
    <a href="{{ url_for('main.shop') }}" class="btn-primary-glow text-sm">
      Volver a la colecci√≥n ‚Üí
    </a>
  </footer>

</main>
{% endblock %}
