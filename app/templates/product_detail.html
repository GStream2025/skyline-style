{% extends "base.html" %}

{% block title %}{{ product.name if product else 'Producto no encontrado' }} - Skyline Style{% endblock %}

{% block extra_head %}
<style>
    .pd-card-hover {
        transition:
            transform 0.35s ease,
            box-shadow 0.35s ease,
            background-color 0.25s ease,
            border-color 0.25s ease;
    }
    .pd-card-hover:hover {
        transform: translateY(-4px);
        box-shadow: 0 22px 40px -18px rgba(15,23,42,0.38);
        background-color: #f8fafc; /* slate-50 */
        border-color: rgba(148,163,184,0.4); /* slate-400/40 */
    }

    .pill-badge {
        display: inline-flex;
        align-items: center;
        gap: .25rem;
        padding: .35rem .8rem;
        border-radius: 9999px;
        font-size: .68rem;
        line-height: 1;
        border: 1px solid rgba(148,163,184,0.35);
        background: rgba(248,250,252,0.85);
        color: #475569;
        white-space: nowrap;
    }

    .pill-badge-dot {
        width: .4rem;
        height: .4rem;
        border-radius: 9999px;
        background: #22c55e;
    }
</style>
{% endblock %}

{% block content %}
<section class="max-w-5xl mx-auto px-4 pt-10 pb-16">

    {% if not product %}
        <div class="bg-white rounded-2xl border border-slate-200 p-8 text-center">
            <h1 class="text-xl font-semibold text-slate-900 mb-2">
                Producto no encontrado
            </h1>
            <p class="text-sm text-slate-600">
                Este producto no existe, fue movido o está temporalmente oculto.
            </p>
            <a href="{{ url_for('main.shop') }}"
               class="mt-5 inline-flex px-6 py-2.5 rounded-full bg-slate-900 text-slate-50 text-sm font-medium hover:bg-slate-800 shadow-sm hover:shadow-md transition">
                Volver a la tienda
            </a>
        </div>

    {% else %}

        <!-- Migas / Volver -->
        <nav class="flex items-center gap-2 text-[11px] md:text-xs text-slate-500 mb-6" aria-label="Breadcrumb">
            <a href="{{ url_for('main.shop') }}" class="hover:text-amber-500 transition">
                Tienda
            </a>
            <span>/</span>
            <span class="truncate max-w-[60%]" title="{{ product.name }}">
                {{ product.name }}
            </span>
        </nav>

        <div class="grid md:grid-cols-2 gap-8 md:gap-10 items-start">

            <!-- IMAGEN PRINCIPAL -->
            <div class="space-y-4" data-product-media>
                <div class="rounded-3xl overflow-hidden bg-slate-100 border border-slate-100 pd-card-hover">
                    <div class="w-full aspect-square sm:aspect-[4/5] bg-slate-100">
                        <img src="{{ product.image }}"
                             alt="{{ product.name }}"
                             loading="lazy"
                             class="w-full h-full object-cover">
                    </div>
                </div>

                <!-- Mini info visual -->
                <div class="grid grid-cols-3 gap-3 text-[11px] text-slate-500">
                    <div class="rounded-2xl border border-slate-100 bg-white/80 px-3 py-2">
                        <p class="font-semibold text-slate-900 text-xs">Fit</p>
                        <p>Unisex urbano</p>
                    </div>
                    <div class="rounded-2xl border border-slate-100 bg-white/80 px-3 py-2">
                        <p class="font-semibold text-slate-900 text-xs">Talles</p>
                        <p>XS a 5XL</p>
                    </div>
                    <div class="rounded-2xl border border-slate-100 bg-white/80 px-3 py-2">
                        <p class="font-semibold text-slate-900 text-xs">Estilo</p>
                        <p>Streetwear</p>
                    </div>
                </div>
            </div>

            <!-- INFO DEL PRODUCTO -->
            <div class="space-y-5" data-product-info>
                <div class="space-y-2">
                    <p class="text-[11px] uppercase tracking-[0.18em] text-slate-400">
                        {% if product.category %}
                            {{ product.category|replace('_', ' ')|capitalize }}
                        {% else %}
                            Colección Skyline
                        {% endif %}
                    </p>

                    <h1 class="text-2xl md:text-3xl font-semibold text-slate-900 leading-tight">
                        {{ product.name }}
                    </h1>
                </div>

                <div class="flex items-center gap-3">
                    <p class="text-lg md:text-xl font-semibold text-amber-500">
                        $ {{ "%.2f"|format(product.price|float) }} UYU
                    </p>
                    <span class="text-[11px] uppercase tracking-wide text-emerald-600 bg-emerald-50 border border-emerald-100 px-2.5 py-1 rounded-full">
                        Drop activo
                    </span>
                </div>

                <div class="space-y-3 text-sm text-slate-600">
                    <p>
                        {{ product.description or 'Parte de la colección Skyline Style: piezas pensadas para combinar fácil, aguantar el uso diario y destacar tanto en calle como en cámara.' }}
                    </p>

                    <ul class="list-disc list-inside space-y-1 text-xs md:text-sm text-slate-600">
                        <li>Streetwear cómodo, con actitud e identidad propia.</li>
                        <li>Cortes pensados para distintos tipos de cuerpo.</li>
                        <li>Ideal para fotos, videos, streaming y uso diario.</li>
                    </ul>
                </div>

                <!-- TAGS / INFO EXTRA -->
                <div class="flex flex-wrap gap-2 text-[11px] text-slate-500">
                    <span class="pill-badge">
                        <span class="pill-badge-dot"></span>
                        Producción bajo demanda
                    </span>
                    <span class="pill-badge">
                        Unisex
                    </span>
                    <span class="pill-badge">
                        Talles XS–5XL
                    </span>
                    <span class="pill-badge">
                        Envío gestionado por Printful
                    </span>
                </div>

                <!-- CTA -->
                <div class="pt-3 flex flex-wrap items-center gap-3">
                    <a href="{{ url_for('main.cart') }}"
                       class="inline-flex items-center justify-center px-7 py-2.5 rounded-full bg-slate-900 text-slate-50 text-sm font-medium hover:bg-slate-800 shadow-sm hover:shadow-md transition">
                        Agregar al carrito (demo)
                    </a>

                    <p class="text-[11px] text-slate-500 max-w-xs">
                        Esta vista es demostrativa. Más adelante podés conectar el carrito con tu gateway de pago y la automatización completa de Printful.
                    </p>
                </div>

                <!-- INFO TALLE / CUIDADO (TEXTOS DE MARCA) -->
                <div class="pt-2 border-t border-slate-100 text-[11px] md:text-xs text-slate-500 space-y-1">
                    <p>
                        <span class="font-semibold text-slate-700">Tip de fit:</span>
                        si estás entre dos talles y te gusta un look oversize, elegí el más grande. Si preferís ajuste clásico, quedate con tu talle habitual.
                    </p>
                    <p>
                        <span class="font-semibold text-slate-700">Cuidados:</span>
                        lavar con agua fría, del revés, y evitar planchar directo sobre el estampado para alargar la vida del diseño.
                    </p>
                </div>
            </div>
        </div>
    {% endif %}
</section>
{% endblock %}

{% block extra_js %}
<!-- GSAP para animación suave de detalle de producto -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const media = document.querySelector('[data-product-media]');
        const info = document.querySelector('[data-product-info]');

        if (media) {
            gsap.from(media, {
                opacity: 0,
                x: -24,
                duration: 0.6,
                ease: 'power3.out'
            });
        }

        if (info) {
            gsap.from(info, {
                opacity: 0,
                x: 24,
                duration: 0.6,
                delay: 0.08,
                ease: 'power3.out'
            });
        }
    });
</script>
{% endblock %}
