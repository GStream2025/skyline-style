{# templates/shop.html — Skyline Store (Light Elegant Commerce) #}
{% extends "base.html" %}
{% block title %}Tienda · Skyline Style{% endblock %}

{% block extra_head %}
<style>
/* ==========================================================
   SKYLINE STYLE · SHOP — LIGHT ELEGANT PRO
   Diseño claro, profesional y orientado a conversión
========================================================== */

/* ---------- TOKENS ---------- */
:root{
  --bg:#ffffff;
  --panel:#f8fafc;
  --panel-2:#f1f5f9;
  --border:#e2e8f0;
  --text:#0f172a;
  --muted:#64748b;
  --brand:#2563eb;
  --brand-soft:#eff6ff;
  --accent:#f59e0b;
  --radius-xl:1.25rem;
  --radius-lg:1rem;
  --shadow-sm:0 6px 18px rgba(15,23,42,.06);
  --shadow-md:0 18px 40px rgba(15,23,42,.10);
}

/* ---------- LAYOUT ---------- */
.shop-wrap{
  max-width:1200px;
  margin:0 auto;
  padding:3rem 1rem 5rem;
}

@media(min-width:768px){
  .shop-wrap{ padding:4rem 1.5rem 6rem; }
}

/* ---------- HEADER ---------- */
.shop-header{
  margin-bottom:2.5rem;
}
.shop-kicker{
  font-size:.7rem;
  font-weight:700;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:var(--brand);
}
.shop-title{
  font-size:clamp(2rem,4vw,2.6rem);
  font-weight:900;
  letter-spacing:-.4px;
  color:var(--text);
}
.shop-sub{
  margin-top:.6rem;
  max-width:42rem;
  font-size:1rem;
  line-height:1.55;
  color:var(--muted);
}

/* ---------- FILTERS ---------- */
.filters-bar{
  display:flex;
  gap:.6rem;
  flex-wrap:wrap;
  margin:2rem 0 2.5rem;
}
.filters-scroll{
  display:flex;
  gap:.6rem;
  overflow-x:auto;
  padding-bottom:.25rem;
}
.filter-pill{
  border-radius:999px;
  padding:.55rem 1.25rem;
  font-size:.75rem;
  font-weight:600;
  border:1px solid var(--border);
  background:#fff;
  color:#334155;
  cursor:pointer;
  transition:all .22s ease;
  white-space:nowrap;
}
.filter-pill:hover{
  border-color:var(--brand);
  color:var(--brand);
  background:var(--brand-soft);
}
.filter-pill.is-active{
  background:var(--brand);
  color:#fff;
  border-color:var(--brand);
}

/* ---------- GRID ---------- */
.shop-section{
  margin-bottom:4rem;
}
.shop-section-title{
  font-size:1.25rem;
  font-weight:800;
  color:var(--text);
  margin-bottom:1.25rem;
}

.shop-grid{
  display:grid;
  gap:1.5rem;
}
@media(min-width:640px){
  .shop-grid{ grid-template-columns:repeat(2,1fr); }
}
@media(min-width:1024px){
  .shop-grid{ grid-template-columns:repeat(3,1fr); }
}

/* ---------- PRODUCT CARD ---------- */
.product-card{
  background:#fff;
  border:1px solid var(--border);
  border-radius:var(--radius-xl);
  overflow:hidden;
  box-shadow:var(--shadow-sm);
  transition:transform .28s ease, box-shadow .28s ease, border-color .28s ease;
  display:flex;
  flex-direction:column;
}
.product-card:hover{
  transform:translateY(-6px);
  box-shadow:var(--shadow-md);
  border-color:#c7d2fe;
}
.product-media{
  aspect-ratio:1/1;
  background:var(--panel);
  overflow:hidden;
}
.product-media img{
  width:100%;
  height:100%;
  object-fit:cover;
  transition:transform .6s ease;
}
.product-card:hover img{
  transform:scale(1.06);
}
.product-body{
  padding:1rem 1.1rem 1.25rem;
  display:flex;
  flex-direction:column;
  gap:.35rem;
}
.product-cat{
  font-size:.65rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:.12em;
  color:var(--muted);
}
.product-title{
  font-size:.95rem;
  font-weight:700;
  color:var(--text);
  line-height:1.35;
}
.product-price{
  margin-top:.25rem;
  font-size:.95rem;
  font-weight:800;
  color:var(--brand);
}

/* ---------- EMPTY ---------- */
.shop-empty{
  margin-top:3rem;
  font-size:.9rem;
  color:var(--muted);
}

/* ---------- MOTION SAFE ---------- */
@media (prefers-reduced-motion: reduce){
  *{
    transition:none!important;
    animation:none!important;
  }
}
</style>
{% endblock %}

{% block content %}

{% set order = ["buzos","remeras","gorros","camperas","otros"] %}
{% set labels = {
  "buzos":"Buzos / Hoodies",
  "remeras":"Remeras",
  "gorros":"Gorros",
  "camperas":"Camperas",
  "otros":"Otros"
} %}

{% macro product_card(product, cat) %}
<a href="{{ url_for('main.product_detail', product_id=product.id) }}"
   class="product-card"
   data-product-category="{{ cat }}">
  <div class="product-media">
    <img src="{{ product.image }}"
         alt="{{ product.name }}"
         loading="lazy"
         decoding="async">
  </div>
  <div class="product-body">
    <span class="product-cat">{{ labels.get(cat, cat) }}</span>
    <h3 class="product-title">{{ product.name }}</h3>
    <div class="product-price">$ {{ product.price }} UYU</div>
  </div>
</a>
{% endmacro %}

<section class="shop-wrap">

  <header class="shop-header">
    <div class="shop-kicker">Skyline Style Store</div>
    <h1 class="shop-title">Tienda oficial</h1>
    <p class="shop-sub">
      Productos seleccionados, dropshipping confiable y diseño pensado para durar.
      Comprá con seguridad, estilo y envío directo.
    </p>
  </header>

  <div class="filters-bar filters-scroll" data-category-filters>
    {% for key,label in labels.items() %}
      <button class="filter-pill {{ 'is-active' if loop.first }}"
              data-filter-target="{{ key }}">
        {{ label }}
      </button>
    {% endfor %}
  </div>

  {% if grouped_products %}
    {% for cat in order if grouped_products.get(cat) %}
      <section class="shop-section" data-category-section="{{ cat }}">
        <h2 class="shop-section-title">
          {{ labels.get(cat, cat) }}
        </h2>
        <div class="shop-grid">
          {% for product in grouped_products[cat] %}
            {{ product_card(product, cat) }}
          {% endfor %}
        </div>
      </section>
    {% endfor %}
  {% elif products %}
    <div class="shop-grid">
      {% for product in products %}
        {{ product_card(product, product.category|default('otros')) }}
      {% endfor %}
    </div>
  {% else %}
    <p class="shop-empty">
      Todavía no hay productos disponibles.
    </p>
  {% endif %}

</section>
{% endblock %}
