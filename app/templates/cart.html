{% extends "base.html" %}

{% block title %}Carrito - Skyline Style{% endblock %}

{% block extra_head %}
<style>
    .cart-card {
        transition: transform .35s ease, box-shadow .35s ease;
    }
    .cart-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 18px 30px -10px rgba(15,23,42,0.18);
    }
</style>
{% endblock %}

{% block content %}
<section class="max-w-4xl mx-auto px-4 pt-10 pb-16">

    <!-- Título -->
    <h1 class="text-3xl md:text-4xl font-bold tracking-tight text-slate-900 mb-6">
        Tu carrito
    </h1>

    {% if cart_items %}

        <!-- CONTENEDOR CARRITO -->
        <div class="bg-white rounded-2xl border border-slate-200 shadow-sm p-5 md:p-7 cart-card" data-cart>

            <!-- ITEMS -->
            {% for item in cart_items %}
                <div class="flex items-center justify-between py-4 border-b border-slate-100 last:border-0">

                    <div class="flex flex-col">
                        <p class="text-sm md:text-base font-semibold text-slate-900">
                            {{ item.name }}
                        </p>

                        <p class="text-[11px] text-slate-500">
                            Cantidad: {{ item.quantity }}
                        </p>
                    </div>

                    <p class="text-sm md:text-base font-semibold text-amber-500">
                        $ {{ item.total }} UYU
                    </p>
                </div>
            {% endfor %}

            <!-- TOTAL -->
            <div class="flex items-center justify-between pt-5 mt-4 border-t border-slate-200">
                <p class="text-sm md:text-base font-semibold text-slate-700">Total</p>
                <p class="text-lg md:text-xl font-bold text-amber-500">
                    $ {{ cart_total }} UYU
                </p>
            </div>

            <!-- ACCIONES -->
            <div class="flex flex-wrap items-center justify-between gap-3 mt-6">

                <a href="{{ url_for('main.shop') }}"
                   class="text-sm px-5 py-2 rounded-full border border-slate-300 text-slate-700 hover:border-amber-500 hover:text-amber-600 transition">
                    Seguir comprando
                </a>

                <a href="#"
                   class="text-sm px-6 py-2.5 rounded-full bg-slate-900 text-slate-50 hover:bg-slate-800 shadow-sm hover:shadow-md transition">
                    Finalizar compra
                </a>
            </div>
        </div>

    {% else %}

        <!-- CARRITO VACÍO -->
        <div class="bg-white rounded-2xl border border-dashed border-slate-300 p-8 text-center" data-empty-cart>
            <h2 class="text-lg font-semibold text-slate-900 mb-1">Tu carrito está vacío</h2>

            <p class="text-sm text-slate-500 mb-4">
                Cuando agregues productos, los vas a ver acá.
            </p>

            <a href="{{ url_for('main.shop') }}"
               class="inline-flex px-6 py-2.5 rounded-full bg-slate-900 text-slate-50 text-sm hover:bg-slate-800 shadow-sm hover:shadow-md transition">
                Ir a la tienda
            </a>
        </div>

    {% endif %}
</section>
{% endblock %}

{% block extra_js %}
<!-- Animación GSAP de entrada -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {

        if (document.querySelector('[data-cart]')) {
            gsap.from('[data-cart]', {
                opacity: 0,
                y: 25,
                duration: .6,
                ease: 'power3.out'
            });
        }

        if (document.querySelector('[data-empty-cart]')) {
            gsap.from('[data-empty-cart]', {
                opacity: 0,
                scale: 0.95,
                duration: .6,
                ease: 'power3.out'
            });
        }
    });
</script>
{% endblock %}
